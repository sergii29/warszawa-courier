<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Warszawa Cyberpunk 2077</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <style>
        :root {
            --bg: #050510; 
            --card: rgba(20, 20, 40, 0.8); 
            --neon-blue: #00f3ff;
            --neon-pink: #bc13fe;
            --text: #fff;
        }
        body {
            background-color: var(--bg);
            /* –§–æ–Ω: —Å–µ—Ç–∫–∞ –≤ —Å—Ç–∏–ª–µ –∫–∏–±–µ—Ä–ø–∞–Ω–∫ */
            background-image: 
                linear-gradient(rgba(0, 243, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 243, 255, 0.1) 1px, transparent 1px);
            background-size: 40px 40px;
            color: var(--text);
            font-family: 'Courier New', Courier, monospace; /* –®—Ä–∏—Ñ—Ç –∫–∞–∫ —É —Ö–∞–∫–µ—Ä–æ–≤ */
            margin: 0; padding: 0; min-height: 100vh; overflow: hidden;
            touch-action: manipulation;
        }
        /* –≠—Ñ—Ñ–µ–∫—Ç –≤–∏–Ω—å–µ—Ç–∫–∏ (–∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ –ø–æ –∫—Ä–∞—è–º) */
        body::after {
            content: ""; position: absolute; inset: 0;
            background: radial-gradient(circle, transparent 40%, #000 100%);
            z-index: -1; pointer-events: none;
        }

        /* –•–µ–¥–µ—Ä */
        .header-container {
            background: rgba(5, 5, 16, 0.9);
            border-bottom: 2px solid var(--neon-blue);
            padding: 15px;
            box-shadow: 0 0 15px var(--neon-blue);
        }
        .top-nav { display: flex; justify-content: space-between; align-items: flex-start; }
        
        /* –ü–æ–ª–æ—Å–∫–∞ —ç–Ω–µ—Ä–≥–∏–∏ */
        .energy-track { height: 6px; background: #333; margin-top: 8px; border: 1px solid #555; }
        .energy-fill { height: 100%; width: 0%; background: var(--neon-pink); box-shadow: 0 0 10px var(--neon-pink); transition: width 0.1s linear; }

        /* –ö–æ–Ω—Ç–µ–Ω—Ç */
        .content { padding: 15px; height: calc(100vh - 240px); overflow-y: auto; padding-bottom: 110px; }
        .view { display: none; flex-direction: column; gap: 15px; }
        .view.active { display: flex; }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            background: var(--card);
            border: 1px solid var(--neon-blue);
            border-radius: 0px; /* –û—Å—Ç—Ä—ã–µ —É–≥–ª—ã */
            padding: 15px;
            position: relative;
        }
        .card::before { /* –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —É–≥–æ–ª–æ–∫ */
            content: ""; position: absolute; top: -1px; left: -1px;
            width: 10px; height: 10px; border-top: 2px solid white; border-left: 2px solid white;
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn-action {
            background: transparent;
            color: var(--neon-blue);
            border: 1px solid var(--neon-blue);
            padding: 12px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: 0.2s;
        }
        .btn-action:active {
            background: var(--neon-blue);
            color: black;
            box-shadow: 0 0 20px var(--neon-blue);
        }

        /* –®–∞—Ä —Ä–∞–±–æ—Ç—ã */
        #work-sphere {
            width: 130px; height: 130px;
            border-radius: 50%;
            border: 2px solid var(--neon-pink);
            background: rgba(0,0,0,0.5);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            margin: 20px auto;
            box-shadow: 0 0 20px var(--neon-pink), inset 0 0 20px var(--neon-pink);
            user-select: none; touch-action: none;
            color: var(--neon-pink);
            text-shadow: 0 0 5px var(--neon-pink);
        }
        #work-sphere:active { transform: scale(0.95); background: var(--neon-pink); color: white; text-shadow: none; }

        /* –õ–æ–≥ –∏ –Ω–∏–∂–Ω–µ–µ –º–µ–Ω—é */
        #game-log { 
            background: rgba(0,0,0,0.8); height: 75px; 
            font-size: 10px; padding: 5px 12px; 
            border-top: 1px solid var(--neon-blue); 
            color: var(--neon-blue); font-family: monospace;
            display: flex; flex-direction: column-reverse; 
        }
        .tab-bar {
            background: black;
            position: fixed; bottom: 0; width: 100%;
            display: grid; grid-template-columns: repeat(5, 1fr);
            border-top: 2px solid var(--neon-pink);
        }
        .tab-item { padding: 15px 0; text-align: center; color: #555; font-size: 10px; cursor: pointer; text-transform: uppercase; }
        .tab-item.active { color: var(--neon-pink); text-shadow: 0 0 10px var(--neon-pink); background: rgba(188, 19, 254, 0.1); }

        /* –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ –∫–≤–µ—Å—Ç–∞ */
        #quest-bar {
            display: none; position: fixed; bottom: 85px; left: 10px; right: 10px;
            background: black; border: 2px solid var(--neon-blue);
            padding: 15px; z-index: 2000;
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.3);
        }
        
        .status-badge { padding: 2px 6px; border: 1px solid #fff; font-size: 9px; display: none; margin-bottom: 2px; text-align:center; color: #fff; }
        #inventory-display { display: flex; flex-wrap: wrap; gap: 5px; margin-top: 8px; justify-content: flex-end; }
        .inv-item { border: 1px solid #555; padding: 2px 5px; font-size: 9px; color: #ccc; }
        .weather-badge { font-size: 9px; padding: 2px 8px; background: #222; border: 1px solid #555; }
        .promo-input { background: transparent; border: 1px solid var(--neon-blue); color: white; padding: 10px; width: calc(100% - 22px); margin-bottom: 10px; font-family: monospace; }
    </style>
</head>
<body>

<div id="quest-bar">
    <div style="display:flex; justify-content:space-between; align-items:flex-start;">
        <div>
            <b id="quest-title" style="color:var(--neon-blue); font-size: 14px;">üì¶ DATA_PACKET</b><br>
            <small>Credit decay:</small> <b style="color:#fff;" id="quest-pay">0.00</b> PLN
        </div>
        <div id="quest-timer-ui" style="color:var(--neon-pink); font-weight:bold; font-size: 20px;">0:15</div>
    </div>
    <div id="quest-actions-choice" style="margin-top:12px; display: flex; gap: 8px;">
        <button class="btn-action" style="border-color:var(--neon-blue); flex: 2;" onclick="acceptOrder()">ACCEPT</button>
        <button class="btn-action" style="border-color:var(--neon-pink); color:var(--neon-pink); flex: 1.5; font-size: 8px;" onclick="activateAutopilot()">AUTO_BOT<br><small>45 PLN</small></button>
    </div>
    <div id="quest-active-ui" style="display:none; margin-top:10px;">
        <div id="order-status-text" style="font-size: 11px; margin-bottom: 5px; color: var(--neon-blue);">UPLOADING...</div>
        <div class="energy-track" style="height:4px;"><div id="quest-progress-bar" style="height:100%; width:0%; background:var(--neon-blue); box-shadow: 0 0 10px var(--neon-blue);"></div></div>
    </div>
</div>

<div class="header-container">
    <div class="top-nav">
        <div><small style="color:var(--neon-blue);">CREDITS</small><br><b id="money-val" style="font-size: 20px; text-shadow: 0 0 10px var(--neon-blue);">0.00 PLN</b></div>
        <div style="text-align: right; display: flex; flex-direction: column; align-items: flex-end;">
            <b id="lvl-val" style="color:var(--neon-pink); font-size: 13px;">LVL 1.0</b>
            <div id="inventory-display"></div>
            <div id="bike-status-ui" class="status-badge">üö≤ 00:00</div>
            <div id="auto-status-ui" class="status-badge">ü§ñ 00:00</div>
            <div id="buff-status-ui" class="status-badge">‚ö° 00:00</div>
            <span id="weather-ui" class="weather-badge">‚òÄÔ∏è Clear</span>
        </div>
    </div>
    <div style="font-size: 11px; margin-top: 10px; display: flex; justify-content: space-between;">
        <span style="color:var(--neon-pink)">‚ö° ENERGY <b id="en-text">0/2000</b></span>
        <span style="color:var(--neon-blue)">H2O: <b id="water-val">0</b> ml</span>
    </div>
    <div class="energy-track"><div id="en-fill" class="energy-fill"></div></div>
    <div style="display: flex; justify-content: space-between; font-size: 9px; margin-top: 5px; opacity: 0.8; font-family: monospace;">
        <span id="tax-timer">TAX: 05:00</span>
        <span id="rent-timer" style="color:red">RENT: 10:00</span>
    </div>
</div>

<div class="content">
    
    <div id="view-main" class="view active">
        <div style="text-align: center; font-size: 12px; color: var(--neon-blue); letter-spacing: 2px;" id="district-ui">SECTOR: Praga</div>
        <div id="work-sphere">
            <b style="font-size: 16px;">HACK</b>
            <div id="click-rate-ui" style="font-size: 10px; opacity: 0.8; margin-top: 5px;">0.10 PLN</div>
        </div>
        <button class="btn-action" style="border-color:#555; color:#aaa;" onclick="collectBottles()">‚ôªÔ∏è RECYCLE (+0.02)</button>
        <button class="btn-action" style="margin-top: 5px;" onclick="switchTab('districts', this)">üèôÔ∏è WARP SECTOR</button>
    </div>

    <div id="view-districts" class="view">
        <h3 style="margin:0; color:var(--neon-blue)">üèôÔ∏è SECTOR SELECT</h3>
        <div class="card"><b>Praga</b><br><small>Rent: 50. Low Risk.</small><br><button class="btn-action" style="margin-top:5px; background:rgba(0,255,0,0.1);" onclick="moveDistrict(0)">ACTIVE</button></div>
        <div class="card"><b>Mokot√≥w (LVL 2.5)</b><br><small>Rent: 120. Yield: +50%.</small><br><button id="dist-btn-1" class="btn-action" style="margin-top:5px;" onclick="moveDistrict(1)">WARP (150 PLN)</button></div>
        <div class="card"><b>≈ör√≥dmie≈õcie (LVL 5.0)</b><br><small>Rent: 300. Yield: x2.5.</small><br><button id="dist-btn-2" class="btn-action" style="margin-top:5px;" onclick="moveDistrict(2)">WARP (500 PLN)</button></div>
    </div>

    <div id="view-quests" class="view">
        <h3 style="margin:0; color:var(--neon-blue)">üèÜ PROTOCOLS</h3>
        <div id="milestones-list"></div>
    </div>

    <div id="view-shop" class="view">
        <div class="card"><b>üß¥ H2O Canister</b><br><small>Recharge Hydration.</small><button class="btn-action" style="margin-top:8px;" onclick="buyWater()">1.50 PLN</button></div>
        <div class="card" style="border-color: var(--neon-pink)"><b>‚òï Stim-Pack (Coffee)</b><br><small>Energy +300 instant.</small><button class="btn-action" style="border-color: var(--neon-pink); color:var(--neon-pink); margin-top:8px;" onclick="buyDrink('coffee', 5)">5.00 PLN</button></div>
        <div class="card"><b>üîã Adrenaline Shot</b><br><small>Freeze Energy drain (2m).</small><button class="btn-action" style="margin-top:8px;" onclick="buyDrink('energy', 12)">12.00 PLN</button></div>
    </div>

    <div id="view-invest" class="view">
        <h3 style="margin:0; color:var(--neon-pink);">UPGRADES</h3>
        <div class="card"><b>üö≤ E-Bike Rent</b><br><small>Speed x2. Duration 10m.</small><button id="buy-bike-rent" class="btn-action" style="margin-top:8px;" onclick="rentBike()">RENT (30 PLN)</button></div>
        <div id="upgrade-items"></div>
    </div>

    <div id="view-bank" class="view">
        <div class="card">
            <h3 style="margin:0 0 10px 0; color:var(--neon-blue);">üéÅ ACCESS CODE</h3>
            <input type="text" id="promo-input" class="promo-input" placeholder="ENTER_CODE">
            <button class="btn-action" onclick="usePromo()">EXECUTE</button>
        </div>
        <div id="bank-actions-ui"></div>
        <h3 style="margin:10px 0 5px 0; color:var(--neon-pink)">Reputation Exchange</h3>
        <button class="btn-action" style="margin:10px 0;" onclick="exchangeLvl(0.05, 10)">SELL -0.05 LVL ‚Æï 10 PLN</button>
        <button class="btn-action" onclick="exchangeLvl(1.00, 300)">SELL -1.00 LVL ‚Æï 300 PLN</button>
        <h3 style="margin:15px 0 5px 0;">üìú SYSTEM LOGS</h3>
        <div class="card" id="history-ui" style="max-height: 200px; overflow-y: auto; font-size: 10px; font-family: monospace;"></div>
    </div>
</div>

<div id="game-log"></div>

<div class="tab-bar">
    <div class="tab-item active" onclick="switchTab('main', this)">CITY</div>
    <div class="tab-item" onclick="switchTab('quests', this)">GOALS</div>
    <div class="tab-item" onclick="switchTab('shop', this)">SHOP</div>
    <div class="tab-item" onclick="switchTab('invest', this)">GEAR</div>
    <div class="tab-item" onclick="switchTab('bank', this)">DATA</div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="database.js"></script>
<script src="logic.js" defer></script>

</body>
</html>
