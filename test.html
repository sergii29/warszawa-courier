<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project: Bright Future Tycoon</title>
    <style>
        :root {
            --bg-main: #f0f2f5; /* –°–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω */
            --bg-card: #ffffff; /* –ë–µ–ª—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ */
            --color-primary: #10b981; /* –ü—Ä–∏—è—Ç–Ω—ã–π –∑–µ–ª–µ–Ω—ã–π */
            --color-primary-dark: #059669;
            --color-secondary: #3b82f6; /* –Ø—Ä–∫–∏–π —Å–∏–Ω–∏–π */
            --color-accent: #f59e0b; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π/–ó–æ–ª–æ—Ç–æ–π */
            --color-danger: #ef4444;
            --text-main: #1f2937; /* –¢–µ–º–Ω–æ-—Å–µ—Ä—ã–π —Ç–µ–∫—Å—Ç */
            --text-muted: #6b7280; /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Ç–µ–∫—Å—Ç */
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
            --radius-lg: 16px;
            --radius-md: 12px;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-main);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            user-select: none;
            line-height: 1.5;
        }

        /* --- LAYOUT GRID --- */
        .main-container {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .grid-2-cols {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }
        @media (max-width: 768px) { .grid-2-cols { grid-template-columns: 1fr; } }

        /* --- CARDS & PANELS --- */
        .panel {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 24px;
            box-shadow: var(--shadow-sm);
            border: 1px solid rgba(0,0,0,0.05);
        }

        .panel-title {
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* --- HEADER DASHBOARD --- */
        .dashboard-header {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
        }

        .stat-card {
            background: var(--bg-card);
            padding: 20px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .stat-card.accent-gold { border-bottom: 4px solid var(--color-accent); }
        .stat-card.accent-blue { border-bottom: 4px solid var(--color-secondary); }
        .stat-card.accent-green { border-bottom: 4px solid var(--color-primary); }

        .stat-icon { font-size: 1.5rem; margin-bottom: 8px; }
        .stat-label { font-size: 0.875rem; color: var(--text-muted); font-weight: 500; }
        .stat-value { font-size: 1.5rem; font-weight: 800; color: var(--text-main); }

        /* --- LEVEL PROGRESS --- */
        .level-section { margin-top: 16px; }
        .level-info { display: flex; justify-content: space-between; margin-bottom: 8px; font-weight: 600; }
        .progress-track {
            background: #e5e7eb;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-secondary), var(--color-primary));
            width: 0%;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* --- ACTION BUTTONS --- */
        .big-btn {
            width: 100%;
            padding: 24px;
            border: none;
            border-radius: var(--radius-lg);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: 700;
            transition: all 0.2s;
            color: white;
            box-shadow: var(--shadow-md);
        }
        .big-btn:active { transform: scale(0.98); }
        .big-btn-icon { font-size: 2.5rem; margin-bottom: 10px; }
        .big-btn-subtext { font-size: 0.9rem; opacity: 0.9; font-weight: 400; margin-top: 5px;}

        .btn-work { background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark)); }
        .btn-work:hover { filter: brightness(110%); }
        .btn-work:disabled { background: #d1d5db; color: #9ca3af; cursor: not-allowed; box-shadow: none;}

        .btn-rest { background: linear-gradient(135deg, var(--color-secondary), #2563eb); }
        .btn-rest:hover { filter: brightness(110%); }

        /* --- INVENTORY CHIPS --- */
        .inventory-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .inv-chip {
            background: #e0f2fe;
            color: #0369a1;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            border: 1px solid #bae6fd;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .empty-inv { color: var(--text-muted); font-style: italic; padding: 10px; }

        /* --- SHOP CARDS --- */
        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 20px;
        }
        .shop-item-card {
            background: var(--bg-card);
            border: 1px solid #e5e7eb;
            border-radius: var(--radius-md);
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transition: border-color 0.2s;
        }
        .shop-item-card:hover { border-color: var(--color-secondary); }

        .shop-item-header { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
        .shop-item-icon { font-size: 2rem; }
        .shop-item-name { font-weight: 700; font-size: 1.1rem; }
        .shop-item-desc { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 16px; flex-grow: 1; }
        .shop-item-footer { display: flex; justify-content: space-between; align-items: center; margin-top: auto; }
        .shop-item-price { font-weight: 800; color: var(--color-accent); font-size: 1.1rem; }

        .buy-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
            background: var(--color-primary); color: white;
        }
        .buy-btn.consumable { background: var(--color-secondary); }
        .buy-btn:hover { filter: brightness(110%); }
        .buy-btn:active { transform: scale(0.95); }


        /* --- LOG --- */
        .log-panel {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            max-height: 150px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.85rem;
        }
        .log-entry { padding: 4px 0; border-bottom: 1px solid #eee; color: var(--text-muted); }
        .log-entry.important { color: var(--color-primary-dark); font-weight: 600; }
        .log-entry.error { color: var(--color-danger); }

        /* Reset Button */
        .reset-btn { position: fixed; top: 20px; right: 20px; background: rgba(239, 68, 68, 0.1); color: var(--color-danger); border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-weight: 600;}
        .reset-btn:hover { background: var(--color-danger); color: white; }
    </style>
</head>
<body>

<button class="reset-btn" onclick="resetGame()">üóëÔ∏è –°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</button>

<div class="main-container">
    
    <section>
        <h1 style="margin-bottom: 10px;">–ú–æ–π –ü—Ä–æ–µ–∫—Ç: –ü–∞–Ω–µ–ª—å –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h1>
        <div class="dashboard-header">
            <div class="stat-card accent-gold">
                <span class="stat-icon">üí∞</span>
                <span class="stat-label">–ë–∞–ª–∞–Ω—Å</span>
                <span class="stat-value" id="money">0 $</span>
            </div>
            <div class="stat-card accent-blue">
                <span class="stat-icon">‚ö°</span>
                <span class="stat-label">–≠–Ω–µ—Ä–≥–∏—è</span>
                <span class="stat-value" id="energy">100 / 100</span>
            </div>
            <div class="stat-card accent-green">
                <span class="stat-icon">üìà</span>
                <span class="stat-label">–ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥</span>
                <span class="stat-value" id="income">0 $/—Å–µ–∫</span>
            </div>
        </div>

         <div class="panel level-section">
            <div class="level-info">
                <span>‚≠ê –£—Ä–æ–≤–µ–Ω—å <span id="level">1</span></span>
                <span id="rank-name" style="color: var(--color-secondary)">–ù–æ–≤–∏—á–æ–∫</span>
            </div>
            <div class="progress-track">
                <div class="progress-fill" id="xp-bar"></div>
            </div>
            <div style="text-align: right; font-size: 0.85rem; color: var(--text-muted); margin-top: 5px;" id="xp-text">0 / 100 XP</div>
        </div>
    </section>


    <div class="grid-2-cols">
        <section class="panel actions-panel" style="display: flex; gap: 20px; flex-direction: column;">
            <h2 class="panel-title">üõ†Ô∏è –ê–∫—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
            <button class="big-btn btn-work" id="btn-work" onclick="work()">
                <span class="big-btn-icon">üî®</span>
                –†–ê–ë–û–¢–ê–¢–¨
                <span class="big-btn-subtext">-2 –≠–Ω–µ—Ä–≥–∏–∏ | +XP –∏ –î–µ–Ω—å–≥–∏</span>
            </button>
            <button class="big-btn btn-rest" onclick="rest()">
                <span class="big-btn-icon">üí§</span>
                –û–¢–î–´–•–ê–¢–¨
                <span class="big-btn-subtext">+10 –≠–Ω–µ—Ä–≥–∏–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
            </button>
        </section>

        <section class="panel inventory-panel">
             <h2 class="panel-title">üéí –ú–æ–∏ –ê–∫—Ç–∏–≤—ã –∏ –ë–æ–Ω—É—Å—ã</h2>
             <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 20px;">
                 –ö—É–ø–ª–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –≤–∞—Å.
             </p>
             <div class="inventory-grid" id="inventory-display">
                 <span class="empty-inv">–ü–æ–∫–∞ –ø—É—Å—Ç–æ... –ó–∞–≥–ª—è–Ω–∏—Ç–µ –≤ –º–∞–≥–∞–∑–∏–Ω.</span>
             </div>
        </section>
    </div>


    <section class="panel shop-panel">
        <h2 class="panel-title">üõí –ú–∞–≥–∞–∑–∏–Ω —É–ª—É—á—à–µ–Ω–∏–π</h2>
        <div class="shop-grid" id="shop-container">
            </div>
    </section>


    <section class="panel log-panel" id="game-log">
        <div style="padding: 10px; color: #999; font-style: italic;">–ñ—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π...</div>
    </section>

</div>


<script>
    // --- CONFIGURATION ---
    const GAME_KEY = 'BRIGHT_TYCOON_TEST_V2';
    const MAX_LEVEL = 150;
    
    // --- STATE ---
    let state = {
        money: 0,
        energy: 100,
        maxEnergy: 100,
        xp: 0,
        level: 1,
        clickPower: 10,
        passiveIncome: 0,
        inventory: {}, 
        lastSaveTime: Date.now()
    };

    // --- DATABASE (Items —Å –∏–∫–æ–Ω–∫–∞–º–∏) ---
    const items = [
        // –†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏
        {
            id: 'coffee', icon: '‚òï', name: '–î–≤–æ–π–Ω–æ–π –≠—Å–ø—Ä–µ—Å—Å–æ', type: 'consumable', price: 50,
            effect: { energy: 40 }, desc: '–ë—ã—Å—Ç—Ä–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç +40 –≠–Ω–µ—Ä–≥–∏–∏.'
        },
        // –£–ª—É—á—à–µ–Ω–∏—è –∫–ª–∏–∫–∞
        {
            id: 'courses', icon: 'üìö', name: '–ö—É—Ä—Å—ã –ø–æ–≤—ã—à–µ–Ω–∏—è', type: 'upgrade', price: 300,
            effect: { clickPower: 8 }, desc: '–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –æ—Ç –æ–¥–Ω–æ–≥–æ –∫–ª–∏–∫–∞ –Ω–∞ +8$.'
        },
        {
            id: 'tools', icon: 'ü¶æ', name: '–ù–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã', type: 'upgrade', price: 2500,
            effect: { clickPower: 40 }, desc: '–ú–æ—â–Ω—ã–π –±—É—Å—Ç. –ö–ª–∏–∫ –ø—Ä–∏–Ω–æ—Å–∏—Ç –Ω–∞ +40$ –±–æ–ª—å—à–µ.'
        },
        // –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥
        {
            id: 'trainee', icon: 'üë®‚Äçüíª', name: '–ù–∞–Ω—è—Ç—å —Å—Ç–∞–∂–µ—Ä–∞', type: 'passive', price: 1000,
            effect: { income: 10 }, desc: '–ü—Ä–∏–Ω–æ—Å–∏—Ç –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ +10 $/—Å–µ–∫.'
        },
        {
            id: 'small_biz', icon: 'üè™', name: '–ú–∞–ª—ã–π –±–∏–∑–Ω–µ—Å', type: 'passive', price: 5000,
            effect: { income: 60, maxEnergy: 10 }, desc: '+60 $/—Å–µ–∫ –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ú–∞–∫—Å. –≠–Ω–µ—Ä–≥–∏—é –Ω–∞ +10.'
        },
        {
            id: 'factory', icon: 'üè≠', name: '–°–≤–æ–π –∑–∞–≤–æ–¥', type: 'passive', price: 30000,
            effect: { income: 400 }, desc: '–°–µ—Ä—å–µ–∑–Ω—ã–π –±–∏–∑–Ω–µ—Å. +400 $/—Å–µ–∫.'
        }
    ];

    // --- CORE MECHANICS ---

    function init() {
        loadGame();
        renderShop();
        updateUI();
        
        // Passive Loop
        setInterval(() => {
            if (state.passiveIncome > 0) addMoney(state.passiveIncome);
            if (state.energy < state.maxEnergy) {
                state.energy = Math.min(state.energy + 0.5, state.maxEnergy); // –ß—É—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ —Ä–µ–≥–µ–Ω
                updateUI();
            }
        }, 1000);

        setInterval(saveGame, 30000);
    }

    function getXpReq(lvl) {
        return Math.floor(100 * Math.pow(lvl, 1.5));
    }

    function work() {
        if (state.energy >= 2) {
            state.energy -= 2;
            // –§–æ—Ä–º—É–ª–∞ –¥–æ—Ö–æ–¥–∞: –ë–∞–∑–∞ * (1 + –ë–æ–Ω—É—Å —É—Ä–æ–≤–Ω—è)
            const earn = state.clickPower * (1 + (state.level * 0.15)); 
            addMoney(earn);
            addXp(15); // –ß—É—Ç—å –±–æ–ª—å—à–µ XP –∑–∞ –∫–ª–∏–∫
            
            if (Math.random() < 0.05) {
                log("‚ö° –£–¥–∞—á–∞! –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫ X3.", "important");
                addMoney(earn * 2);
            }
            updateUI();
        } else {
            log("üõë –ù–µ—Ç —ç–Ω–µ—Ä–≥–∏–∏! –û—Ç–¥–æ—Ö–Ω–∏—Ç–µ.", "error");
            shakeBtn();
        }
    }

    function rest() {
        if (state.energy < state.maxEnergy) {
            state.energy = Math.min(state.energy + 15, state.maxEnergy);
            updateUI();
        }
    }

    function addMoney(amount) {
        state.money += amount;
        updateUI();
    }

    function addXp(amount) {
        if (state.level >= MAX_LEVEL) return;
        state.xp += amount;
        const req = getXpReq(state.level);
        if (state.xp >= req) {
            state.xp -= req;
            state.level++;
            state.maxEnergy += 10;
            state.energy = state.maxEnergy;
            log(`üéâ –ü–û–í–´–®–ï–ù–ò–ï! –£—Ä–æ–≤–µ–Ω—å ${state.level}. –ú–∞–∫—Å. —ç–Ω–µ—Ä–≥–∏—è –≤—ã—Ä–æ—Å–ª–∞!`, "important");
        }
        updateUI();
    }

    function buy(itemId) {
        const item = items.find(i => i.id === itemId);
        if (!item) return;

        if (state.money >= item.price) {
            state.money -= item.price;
            
            if (item.type === 'consumable') {
                if (item.effect.energy) state.energy = Math.min(state.energy + item.effect.energy, state.maxEnergy);
                log(`–ö—É–ø–ª–µ–Ω–æ: ${item.name}`);
            } else {
                if (!state.inventory[item.id]) state.inventory[item.id] = 0;
                state.inventory[item.id]++;
                if (item.effect.clickPower) state.clickPower += item.effect.clickPower;
                if (item.effect.income) state.passiveIncome += item.effect.income;
                if (item.effect.maxEnergy) state.maxEnergy += item.effect.maxEnergy;
                log(`üî® –£–ª—É—á—à–µ–Ω–∏–µ: ${item.name}`);
            }
            
            if (item.type !== 'consumable') {
                item.price = Math.floor(item.price * 1.4); // –ò–Ω—Ñ–ª—è—Ü–∏—è 40%
                renderShop();
            }
            updateUI();
        } else {
            log("üí∏ –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –¥–µ–Ω–µ–≥!", "error");
        }
    }

    // --- UI RENDERERS ---

    function updateUI() {
        // Stats
        document.getElementById('money').innerText = Math.floor(state.money).toLocaleString() + ' $';
        document.getElementById('energy').innerText = Math.floor(state.energy) + ' / ' + state.maxEnergy;
        document.getElementById('income').innerText = '+' + state.passiveIncome.toLocaleString() + ' $/—Å–µ–∫';
        
        // Level
        document.getElementById('level').innerText = state.level;
        const req = getXpReq(state.level);
        const pct = Math.min(100, (state.xp / req) * 100);
        document.getElementById('xp-bar').style.width = pct + '%';
        document.getElementById('xp-text').innerText = `${Math.floor(state.xp)} / ${req.toLocaleString()} XP`;
        
        let rank = "–ù–æ–≤–∏—á–æ–∫";
        if (state.level > 5) rank = "–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç";
        if (state.level > 15) rank = "–ú–µ–Ω–µ–¥–∂–µ—Ä";
        if (state.level > 30) rank = "–î–∏—Ä–µ–∫—Ç–æ—Ä";
        if (state.level > 60) rank = "–û–ª–∏–≥–∞—Ä—Ö";
        document.getElementById('rank-name').innerText = rank;

        document.getElementById('btn-work').disabled = state.energy < 2;
        renderInventory();
    }

    function renderShop() {
        const container = document.getElementById('shop-container');
        container.innerHTML = '';
        items.forEach(item => {
            const btnClass = item.type === 'consumable' ? 'buy-btn consumable' : 'buy-btn';
            const div = document.createElement('div');
            div.className = 'shop-item-card';
            div.innerHTML = `
                <div>
                    <div class="shop-item-header">
                        <span class="shop-item-icon">${item.icon}</span>
                        <span class="shop-item-name">${item.name}</span>
                    </div>
                    <div class="shop-item-desc">${item.desc}</div>
                </div>
                <div class="shop-item-footer">
                    <span class="shop-item-price">${item.price.toLocaleString()} $</span>
                    <button class="${btnClass}" onclick="buy('${item.id}')">–ö—É–ø–∏—Ç—å</button>
                </div>
            `;
            container.appendChild(div);
        });
    }

    function renderInventory() {
        const container = document.getElementById('inventory-display');
        let html = '';
        let hasItems = false;
        for (const [id, count] of Object.entries(state.inventory)) {
            const itemDef = items.find(i => i.id === id);
            if (itemDef && count > 0) {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∏–∫–æ–Ω–∫—É –ø—Ä–µ–¥–º–µ—Ç–∞ –¥–ª—è —á–∏–ø–∞
                html += `<div class="inv-chip">${itemDef.icon} ${itemDef.name} <span style="opacity:0.7">x${count}</span></div>`;
                hasItems = true;
            }
        }
        if (!hasItems) html = '<span class="empty-inv">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤.</span>';
        container.innerHTML = html;
    }

    function log(msg, type='normal') {
        const logBox = document.getElementById('game-log');
        const entry = document.createElement('div');
        entry.className = 'log-entry ' + type;
        const time = new Date().toLocaleTimeString();
        entry.innerText = `[${time}] ${msg}`;
        logBox.insertBefore(entry, logBox.firstChild);
        if (logBox.children.length > 10) logBox.removeChild(logBox.lastChild);
    }

    function shakeBtn() {
        const btn = document.getElementById('btn-work');
        btn.style.transform = 'translateX(5px)';
        setTimeout(() => btn.style.transform = 'translateX(-5px)', 50);
        setTimeout(() => btn.style.transform = 'translateX(0)', 100);
    }

    // --- SAVE/LOAD ---
    function saveGame() {
        state.lastSaveTime = Date.now();
        localStorage.setItem(GAME_KEY, JSON.stringify(state));
    }
    function loadGame() {
        const saved = localStorage.getItem(GAME_KEY);
        if (saved) {
            try { state = { ...state, ...JSON.parse(saved) }; } catch (e) { console.error(e); }
        }
    }
    function resetGame() {
        if(confirm("–°–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ?")) {
            localStorage.removeItem(GAME_KEY);
            location.reload();
        }
    }

    init();
</script>
</body>
</html>
