<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warszawa Royal Bank</title>
    <style>
        :root {
            --bg: #020617; /* –û—á–µ–Ω—å —Ç–µ–º–Ω—ã–π —Å–∏–Ω–∏–π */
            --card-bg: linear-gradient(145deg, #1e3a8a, #0f172a); /* –°–∏–Ω–∏–π —Å–∞–ø—Ñ–∏—Ä */
            --gold: #fbbf24;
            --gold-text: #fef3c7;
            --text: #ffffff;
            --danger: #ef4444;
            --success: #22c55e;
            --glass: rgba(255, 255, 255, 0.05);
        }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0; padding: 20px;
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh;
        }

        /* –ò–ù–§–û –ë–ê–† */
        .top-bar {
            width: 100%; max-width: 360px;
            display: flex; justify-content: space-between; align-items: flex-end;
            margin-bottom: 20px; padding-bottom: 10px;
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
        }
        .wallet-label { font-size: 10px; color: #60a5fa; text-transform: uppercase; letter-spacing: 1px; }
        .wallet-amount { font-size: 20px; font-weight: 700; color: #fff; }

        /* –ö–ê–†–¢–ê SAPPHIRE */
        .sapphire-card {
            width: 100%; max-width: 360px;
            height: auto;
            background: var(--card-bg);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 24px;
            padding: 25px;
            box-sizing: border-box;
            position: relative;
            box-shadow: 0 20px 50px rgba(15, 23, 42, 0.9);
            overflow: hidden;
            display: flex; flex-direction: column;
        }

        /* –ë–ª–∏–∫–∏ */
        .sapphire-card::before {
            content: ''; position: absolute; top: -50%; right: -50%; width: 100%; height: 100%;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.2) 0%, transparent 70%);
            pointer-events: none;
        }

        .bank-header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;
        }
        .bank-name { font-size: 12px; letter-spacing: 2px; color: #93c5fd; text-transform: uppercase; font-weight: 700; }
        .bank-icon { font-size: 18px; }

        /* –ë–õ–û–ö –î–ï–ü–û–ó–ò–¢–ê (–ö–æ–≥–¥–∞ –∞–∫—Ç–∏–≤–µ–Ω) */
        #active-deposit-ui { display: none; text-align: center; padding: 20px 0; }
        
        .locked-amount { font-size: 36px; font-weight: 700; color: #fff; margin-bottom: 5px; text-shadow: 0 0 20px rgba(59, 130, 246, 0.5); }
        .locked-info { font-size: 11px; color: #93c5fd; margin-bottom: 20px; }
        
        .progress-track { width: 100%; height: 6px; background: rgba(0,0,0,0.3); border-radius: 10px; overflow: hidden; margin-bottom: 15px; }
        .progress-fill { height: 100%; background: var(--gold); width: 0%; transition: width 1s linear; }
        
        .timer-text { font-family: monospace; font-size: 14px; color: var(--gold); margin-bottom: 10px; display: block; }

        /* –í–´–ë–û–† –¢–ê–†–ò–§–ê (–ö–æ–≥–¥–∞ –Ω–µ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞) */
        #select-plan-ui { display: block; }
        
        .plan-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 15px; }
        .plan-item {
            background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px; padding: 10px 5px; text-align: center; cursor: pointer;
            transition: 0.2s;
        }
        .plan-item.active { background: rgba(59, 130, 246, 0.2); border-color: #60a5fa; transform: scale(1.05); }
        .plan-days { font-size: 14px; font-weight: bold; color: #fff; display: block; }
        .plan-rate { font-size: 10px; color: var(--gold); }

        .inp-blue {
            background: rgba(15, 23, 42, 0.6); border: 1px solid #334155; color: white;
            padding: 14px; border-radius: 12px; width: 100%; box-sizing: border-box;
            text-align: center; font-size: 16px; font-weight: bold; outline: none; margin-bottom: 10px;
        }
        .inp-blue:focus { border-color: #60a5fa; }

        /* –ö–ù–û–ü–ö–ò */
        .btn { width: 100%; padding: 14px; border-radius: 12px; font-weight: 700; cursor: pointer; border: none; font-size: 12px; text-transform: uppercase; margin-top: 5px; transition: 0.2s; }
        .btn:active { transform: scale(0.98); }

        .btn-deposit {
            background: linear-gradient(135deg, #d4af37, #b45309); color: #000;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.2);
        }
        
        .btn-break {
            background: transparent; border: 1px solid var(--danger); color: var(--danger);
        }
        .btn-claim {
            background: var(--success); color: #000; display: none; /* –°–∫—Ä—ã—Ç–∞ –ø–æ–∫–∞ —Ç–∞–π–º–µ—Ä –Ω–µ –≤—ã–π–¥–µ—Ç */
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.4); animation: pulse 1s infinite;
        }
        @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.02);} 100% {transform: scale(1);} }

        /* –ò–°–¢–û–†–ò–Ø */
        .history-box { width: 100%; max-width: 360px; margin-top: 20px; border-top: 1px solid #1e293b; padding-top: 10px; }
        .h-title { font-size: 10px; color: #64748b; text-transform: uppercase; margin-bottom: 8px; }
        .h-list { display: flex; flex-direction: column; gap: 6px; font-size: 11px; color: #94a3b8; max-height: 150px; overflow-y: auto; }
        .h-row { display: flex; justify-content: space-between; padding: 6px; background: rgba(255,255,255,0.02); border-radius: 6px; }

        /* –¢–ï–°–¢ */
        .debug-btn { margin-top: 30px; background: #334155; color: #fff; border: none; padding: 8px 12px; border-radius: 6px; font-size: 10px; cursor: pointer;}
    </style>
</head>
<body>

    <div class="top-bar">
        <div>
            <div class="wallet-label">–ù–∞–ª–∏—á–Ω—ã–µ</div>
            <div class="wallet-amount" id="money">5000.00 PLN</div>
        </div>
        <div style="font-size:20px;">üíé</div>
    </div>

    <div class="sapphire-card">
        <div class="bank-header">
            <span class="bank-name">Warszawa Royal Bank</span>
            <span class="bank-icon">üè¶</span>
        </div>

        <div id="select-plan-ui">
            <div class="plan-grid">
                <div class="plan-item active" onclick="selectPlan(7, 0.02, this)">
                    <span class="plan-days">7 –î–Ω–µ–π</span>
                    <span class="plan-rate">+2%</span>
                </div>
                <div class="plan-item" onclick="selectPlan(15, 0.06, this)">
                    <span class="plan-days">15 –î–Ω–µ–π</span>
                    <span class="plan-rate">+6%</span>
                </div>
                <div class="plan-item" onclick="selectPlan(30, 0.15, this)">
                    <span class="plan-days">30 –î–Ω–µ–π</span>
                    <span class="plan-rate">+15%</span>
                </div>
            </div>

            <div style="margin-bottom:10px; font-size:10px; color:#64748b; text-align:center;">
                *–î–æ—Å—Ä–æ—á–Ω–æ–µ —Å–Ω—è—Ç–∏–µ: <span style="color:var(--danger)">–®—Ç—Ä–∞—Ñ -30%</span>
            </div>

            <input type="number" id="inp" class="inp-blue" placeholder="–°—É–º–º–∞ –≤–∫–ª–∞–¥–∞...">
            <button class="btn btn-deposit" onclick="startDeposit()">üîí –ó–ê–ú–û–†–û–ó–ò–¢–¨ –°–†–ï–î–°–¢–í–ê</button>
        </div>

        <div id="active-deposit-ui">
            <div class="locked-info">–°–†–ï–î–°–¢–í–ê –ó–ê–ú–û–†–û–ñ–ï–ù–´</div>
            <div class="locked-amount" id="locked-val">0.00</div>
            
            <div class="progress-track"><div class="progress-fill" id="prog-bar"></div></div>
            <span class="timer-text" id="timer-text">00:00:00</span>

            <button class="btn btn-claim" id="btn-claim" onclick="claimDeposit()">üí∞ –ó–ê–ë–†–ê–¢–¨ –° –ü–†–ò–ë–´–õ–¨–Æ</button>
            <button class="btn btn-break" id="btn-break" onclick="breakDeposit()">‚ö†Ô∏è –†–ê–ó–ë–ò–¢–¨ (-30% –®–¢–†–ê–§)</button>
        </div>
    </div>

    <div class="history-box">
        <div class="h-title">–í—ã–ø–∏—Å–∫–∞ –ø–æ —Å—á–µ—Ç—É</div>
        <div class="h-list" id="history"></div>
    </div>

    <button class="debug-btn" onclick="fastForward()">‚è© –¢–ï–°–¢: –ü—Ä–æ–º–æ—Ç–∞—Ç—å –≤—Ä–µ–º—è</button>

    <script>
        // Game State
        let G = {
            money: 5000,
            deposit: null, // { amount, start, end, profit }
            history: []
        };

        let selectedPlan = { days: 7, rate: 0.02 };

        // UI Updates
        function updateUI() {
            document.getElementById('money').innerText = G.money.toFixed(2) + " PLN";
            
            if (G.deposit) {
                document.getElementById('select-plan-ui').style.display = 'none';
                document.getElementById('active-deposit-ui').style.display = 'block';
                document.getElementById('locked-val').innerText = G.deposit.amount.toFixed(2) + " PLN";
            } else {
                document.getElementById('select-plan-ui').style.display = 'block';
                document.getElementById('active-deposit-ui').style.display = 'none';
            }
            renderHistory();
        }

        function selectPlan(days, rate, el) {
            selectedPlan = { days, rate };
            document.querySelectorAll('.plan-item').forEach(d => d.classList.remove('active'));
            el.classList.add('active');
        }

        function startDeposit() {
            let val = parseFloat(document.getElementById('inp').value);
            if (!val || val <= 0 || val > G.money) { alert("–û—à–∏–±–∫–∞ —Å—É–º–º—ã!"); return; }

            G.money -= val;
            
            // –í –¢–ï–°–¢–ï: 1 –¥–µ–Ω—å = 5 —Å–µ–∫—É–Ω–¥ (–¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏)
            let durationSec = selectedPlan.days * 5; 
            
            G.deposit = {
                amount: val,
                start: Date.now(),
                end: Date.now() + (durationSec * 1000),
                profit: val * selectedPlan.rate,
                penalty: val * 0.30 // 30% —à—Ç—Ä–∞—Ñ
            };

            addLog(`–í–∫–ª–∞–¥ –Ω–∞ ${selectedPlan.days} –¥–Ω.`, `-${val.toFixed(0)}`);
            updateUI();
            startTimer();
        }

        function claimDeposit() {
            if(!G.deposit) return;
            let total = G.deposit.amount + G.deposit.profit;
            G.money += total;
            addLog(`–í—ã–ø–ª–∞—Ç–∞ (+${(selectedPlan.rate*100).toFixed(0)}%)`, `+${total.toFixed(2)}`, 'green');
            G.deposit = null;
            updateUI();
        }

        function breakDeposit() {
            if(!G.deposit) return;
            let returnVal = G.deposit.amount - G.deposit.penalty;
            
            if(confirm(`–í–Ω–∏–º–∞–Ω–∏–µ! –ü—Ä–∏ –¥–æ—Å—Ä–æ—á–Ω–æ–º —Å–Ω—è—Ç–∏–∏ –≤—ã –ø–æ—Ç–µ—Ä—è–µ—Ç–µ ${(G.deposit.penalty).toFixed(2)} PLN.\n–í–µ—Ä–Ω–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ ${returnVal.toFixed(2)} PLN.\n–°–Ω—è—Ç—å?`)) {
                G.money += returnVal;
                addLog(`–î–æ—Å—Ä–æ—á–Ω–æ (–®—Ç—Ä–∞—Ñ)`, `-${G.deposit.penalty.toFixed(0)}`, 'red');
                G.deposit = null;
                updateUI();
            }
        }

        // Timer Logic
        let timerInterval;
        function startTimer() {
            if(timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                if(!G.deposit) { clearInterval(timerInterval); return; }
                
                let now = Date.now();
                let left = G.deposit.end - now;
                let totalDur = G.deposit.end - G.deposit.start;
                
                if (left <= 0) {
                    // READY
                    document.getElementById('timer-text').innerText = "–°–†–û–ö –ò–°–¢–ï–ö!";
                    document.getElementById('timer-text').style.color = "#4ade80";
                    document.getElementById('prog-bar').style.width = "100%";
                    document.getElementById('btn-claim').style.display = 'block';
                    document.getElementById('btn-break').style.display = 'none';
                    clearInterval(timerInterval);
                } else {
                    // COUNTING
                    let pct = 100 - (left / totalDur * 100);
                    document.getElementById('prog-bar').style.width = pct + "%";
                    
                    let sec = Math.ceil(left/1000);
                    document.getElementById('timer-text').innerText = `–ë–õ–û–ö–ò–†–û–í–ö–ê: ${sec} —Å–µ–∫.`; // –í —Ä–µ–∞–ª–µ —Ç—É—Ç –±—ã–ª–∏ –±—ã –¥–Ω–∏
                    
                    document.getElementById('btn-claim').style.display = 'none';
                    document.getElementById('btn-break').style.display = 'block';
                }
            }, 100);
        }

        function renderHistory() {
            let h = document.getElementById('history');
            h.innerHTML = G.history.map(x => `
                <div class="h-row">
                    <span>${x.msg}</span>
                    <span style="color:${x.color || '#fff'}">${x.val} PLN</span>
                </div>
            `).join('');
        }

        function addLog(msg, val, color) {
            G.history.unshift({msg, val, color});
            if(G.history.length > 5) G.history.pop();
        }

        function fastForward() {
            if(G.deposit) {
                G.deposit.end = Date.now() - 1000; // –î–µ–ª–∞–µ–º —Ç–∞–∫, –±—É–¥—Ç–æ –≤—Ä–µ–º—è –≤—ã—à–ª–æ
            }
        }

        updateUI();
    </script>

</body>
</html>
