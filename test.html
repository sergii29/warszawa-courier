<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon Courier Test</title>
    <style>
        :root {
            --bg-color: #050510;
            --primary: #00f3ff; /* –ù–µ–æ–Ω–æ–≤—ã–π –≥–æ–ª—É–±–æ–π */
            --secondary: #ff00ff; /* –ù–µ–æ–Ω–æ–≤—ã–π —Ä–æ–∑–æ–≤—ã–π */
            --danger: #ff3333; /* –ù–µ–æ–Ω–æ–≤—ã–π –∫—Ä–∞—Å–Ω—ã–π */
            --gold: #ffd700;
            --panel-bg: rgba(20, 20, 40, 0.95);
            --grid-line: rgba(255, 255, 255, 0.05);
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: #fff;
            font-family: 'Courier New', Courier, monospace;
            overflow: hidden;
            touch-action: manipulation; /* –£–±–∏—Ä–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É —Ç–∞–ø–∞ */
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* --- –í–ï–†–•–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ (HUD) --- */
        .hud {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            background: linear-gradient(180deg, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0) 100%);
            z-index: 10;
        }

        .stat-group {
            text-align: center;
        }

        .stat-label {
            font-size: 10px;
            color: #888;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .stat-val {
            font-size: 20px;
            font-weight: bold;
            text-shadow: 0 0 10px currentColor;
        }

        /* --- –ò–ì–†–û–í–û–ï –ü–û–õ–ï (–ö–ê–†–¢–ê) --- */
        #game-map {
            flex: 1;
            position: relative;
            display: grid;
            /* –°–µ—Ç–∫–∞ –∑–∞–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS */
            background: 
                linear-gradient(var(--grid-line) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
            background-size: 40px 40px; /* –†–∞–∑–º–µ—Ä –∫–ª–µ—Ç–∫–∏ —Ñ–æ–Ω–∞ */
            background-position: center;
            align-content: center;
            justify-content: center;
            gap: 2px;
            padding: 10px;
        }

        .cell {
            background: rgba(255,255,255,0.02);
            border-radius: 4px;
            position: relative;
            transition: all 0.2s ease;
        }
        
        /* –ò–≥—Ä–æ–∫ */
        .player {
            background: var(--primary);
            box-shadow: 0 0 15px var(--primary), inset 0 0 5px #fff;
            border-radius: 50%;
            transform: scale(0.8);
            z-index: 2;
        }

        /* –¶–µ–ª—å (–ó–∞–∫–∞–∑) */
        .target {
            background: var(--secondary);
            box-shadow: 0 0 15px var(--secondary);
            border-radius: 20%;
            transform: scale(0.7);
            animation: pulse 1.5s infinite;
            z-index: 1;
        }

        /* –ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ (–ü—Ä–æ–±–∫–∞) */
        .wall {
            background: var(--danger);
            opacity: 0.4;
            box-shadow: 0 0 5px var(--danger);
            border-radius: 2px;
        }

        /* --- –£–ü–†–ê–í–õ–ï–ù–ò–ï --- */
        .controls {
            background: var(--panel-bg);
            border-top: 1px solid var(--primary);
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: 60px 60px;
            gap: 10px;
            box-shadow: 0 -5px 20px rgba(0, 243, 255, 0.2);
        }

        .btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 12px;
            color: var(--primary);
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            user-select: none;
            transition: 0.1s;
        }

        .btn:active {
            background: var(--primary);
            color: #000;
            box-shadow: 0 0 15px var(--primary);
        }

        .btn-action {
            border-color: var(--gold);
            color: var(--gold);
        }
        
        /* –í—Å–ø–ª—ã–≤–∞—é—â–∏–π —Ç–µ–∫—Å—Ç */
        #msg-log {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
            font-weight: bold;
            text-shadow: 0 0 5px #000;
            pointer-events: none;
            transition: opacity 0.5s;
            opacity: 0;
            z-index: 20;
        }

        @keyframes pulse {
            0% { transform: scale(0.7); opacity: 0.8; }
            50% { transform: scale(0.9); opacity: 1; }
            100% { transform: scale(0.7); opacity: 0.8; }
        }
    </style>
</head>
<body>

    <div class="hud">
        <div class="stat-group">
            <div class="stat-label">–ë–∞–ª–∞–Ω—Å</div>
            <div class="stat-val" style="color: var(--gold)" id="ui-balance">0.00</div>
        </div>
        <div class="stat-group">
            <div class="stat-label">–ó–∞—Ä—è–¥</div>
            <div class="stat-val" style="color: var(--primary)" id="ui-energy">100%</div>
        </div>
        <div class="stat-group">
            <div class="stat-label">–†–µ–π—Ç–∏–Ω–≥</div>
            <div class="stat-val" style="color: var(--secondary)" id="ui-rating">5.0</div>
        </div>
    </div>

    <div id="msg-log"></div>

    <div id="game-map">
        </div>

    <div class="controls">
        <div></div>
        <div class="btn" onclick="move(0, -1)">‚ñ≤</div>
        <div></div>
        
        <div class="btn" onclick="move(-1, 0)">‚óÄ</div>
        <div class="btn btn-action" onclick="actionBoost()">‚ö°</div>
        <div class="btn" onclick="move(1, 0)">‚ñ∂</div>
        
        <div></div>
        <div class="btn" onclick="move(0, 1)">‚ñº</div>
        <div></div>
    </div>

    <script>
        // --- –ù–ê–°–¢–†–û–ô–ö–ò ---
        const GRID_SIZE = 9; // –†–∞–∑–º–µ—Ä –∫–∞—Ä—Ç—ã 9x9
        
        let state = {
            x: 4, y: 4,      // –ü–æ–∑–∏—Ü–∏—è –∏–≥—Ä–æ–∫–∞ (—Ü–µ–Ω—Ç—Ä)
            target: {x:0, y:0}, // –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫–∞–∑–∞
            walls: [],       // –ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
            balance: 0,
            energy: 100,
            rating: 5.0
        };

        const mapEl = document.getElementById('game-map');

        // --- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ---
        function initGame() {
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∫–∏ CSS
            mapEl.style.gridTemplateColumns = `repeat(${GRID_SIZE}, 1fr)`;
            mapEl.style.gridTemplateRows = `repeat(${GRID_SIZE}, 1fr)`;
            
            // –°–æ–∑–¥–∞–Ω–∏–µ —è—á–µ–µ–∫
            mapEl.innerHTML = '';
            for(let i=0; i<GRID_SIZE*GRID_SIZE; i++) {
                let cell = document.createElement('div');
                cell.className = 'cell';
                cell.id = `c-${i}`;
                mapEl.appendChild(cell);
            }
            
            spawnTarget();
            draw();
        }

        // --- –õ–û–ì–ò–ö–ê ---
        function getIdx(x, y) { return y * GRID_SIZE + x; }

        function spawnTarget() {
            // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è, –Ω–µ –Ω–∞ –∏–≥—Ä–æ–∫–µ
            do {
                state.target.x = Math.floor(Math.random() * GRID_SIZE);
                state.target.y = Math.floor(Math.random() * GRID_SIZE);
            } while (state.target.x === state.x && state.target.y === state.y);

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º "–ø—Ä–æ–±–∫–∏" (—Å—Ç–µ–Ω—ã)
            state.walls = [];
            for(let i=0; i<5; i++) {
                let wx = Math.floor(Math.random() * GRID_SIZE);
                let wy = Math.floor(Math.random() * GRID_SIZE);
                // –ù–µ —Å—Ç–∞–≤–∏–º —Å—Ç–µ–Ω—ã –Ω–∞ –∏–≥—Ä–æ–∫–∞ –∏–ª–∏ —Ü–µ–ª—å
                if ((wx !== state.x || wy !== state.y) && (wx !== state.target.x || wy !== state.target.y)) {
                    state.walls.push(getIdx(wx, wy));
                }
            }
        }

        function move(dx, dy) {
            if (state.energy <= 0) {
                showMsg("‚ö° –ù–ï–¢ –≠–ù–ï–†–ì–ò–ò!", "red");
                return;
            }

            let nx = state.x + dx;
            let ny = state.y + dy;

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–Ω–∏—Ü
            if (nx < 0 || nx >= GRID_SIZE || ny < 0 || ny >= GRID_SIZE) return;

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–µ–Ω
            let nIdx = getIdx(nx, ny);
            if (state.walls.includes(nIdx)) {
                showMsg("üöß –ü–†–û–ë–ö–ê! –¢–ï–†–Ø–ï–®–¨ –í–†–ï–ú–Ø", "orange");
                state.energy -= 5;
                updateUI();
                return; // –ù–µ –∏–¥–µ–º —Ç—É–¥–∞
            }

            // –î–≤–∏–∂–µ–Ω–∏–µ
            state.x = nx;
            state.y = ny;
            state.energy -= 1; // –†–∞—Å—Ö–æ–¥ —ç–Ω–µ—Ä–≥–∏–∏ –Ω–∞ —Ö–æ–¥

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
            if (state.x === state.target.x && state.y === state.target.y) {
                let profit = 15 + Math.floor(Math.random() * 10);
                state.balance += profit;
                state.rating = Math.min(5.0, state.rating + 0.01);
                showMsg(`üì¶ –î–û–°–¢–ê–í–õ–ï–ù–û! +${profit} PLN`, "#00f3ff");
                spawnTarget();
            }

            draw();
            updateUI();
        }

        function actionBoost() {
            if (state.balance >= 10) {
                state.balance -= 10;
                state.energy = Math.min(100, state.energy + 50);
                showMsg("üîã –≠–ù–ï–†–ì–ï–¢–ò–ö –í–´–ü–ò–¢!", "#00ff00");
                updateUI();
            } else {
                showMsg("‚ùå –ù–ï –•–í–ê–¢–ê–ï–¢ –î–ï–ù–ï–ì", "red");
            }
        }

        // --- –û–¢–†–ò–°–û–í–ö–ê ---
        function draw() {
            // –û—á–∏—Å—Ç–∫–∞ –∫–ª–∞—Å—Å–æ–≤
            document.querySelectorAll('.cell').forEach(c => {
                c.className = 'cell';
            });

            // –†–∏—Å—É–µ–º –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è
            state.walls.forEach(idx => {
                document.getElementById(`c-${idx}`).classList.add('wall');
            });

            // –†–∏—Å—É–µ–º —Ü–µ–ª—å
            let tIdx = getIdx(state.target.x, state.target.y);
            document.getElementById(`c-${tIdx}`).classList.add('target');

            // –†–∏—Å—É–µ–º –∏–≥—Ä–æ–∫–∞
            let pIdx = getIdx(state.x, state.y);
            document.getElementById(`c-${pIdx}`).classList.add('player');
        }

        function updateUI() {
            document.getElementById('ui-balance').innerText = state.balance.toFixed(2);
            document.getElementById('ui-energy').innerText = state.energy + '%';
            document.getElementById('ui-rating').innerText = state.rating.toFixed(2);
        }

        function showMsg(text, color) {
            let el = document.getElementById('msg-log');
            el.innerText = text;
            el.style.color = color;
            el.style.opacity = 1;
            setTimeout(() => el.style.opacity = 0, 1500);
        }

        // –°—Ç–∞—Ä—Ç
        initGame();

    </script>
</body>
</html>
