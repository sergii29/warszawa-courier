<body>
  <h1>Warszawa Courier</h1>

  <div id="hud"></div>

  <button id="orderBtn">ğŸš´ Ğ’Ğ·ÑÑ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·</button>

  <button id="restBtn">ğŸ› ĞÑ‚Ğ´Ğ¾Ñ…Ğ½ÑƒÑ‚ÑŒ</button>

  <button id="timeBtn">ğŸŒ— Ğ”ĞµĞ½ÑŒ / ĞĞ¾Ñ‡ÑŒ</button>




  <script type="module">
(async () => {
    import { state } from "./state.js";

   const hud = document.getElementById("hud");
   const btn = document.getElementById("orderBtn");
   const restBtn = document.getElementById("restBtn");
   const timeBtn = document.getElementById("timeBtn");
   await loadState(state);render();
  })();
</script>




  function render() {
  let warning = "";
  if (state.energy <= 0) warning = "âš ï¸ Ğ¢Ñ‹ Ğ²Ñ‹Ğ¶Ğ°Ñ‚. ĞÑƒĞ¶Ğ½Ğ¾ Ğ¾Ñ‚Ğ´Ğ¾Ñ…Ğ½ÑƒÑ‚ÑŒ.";
  if (state.stress >= 100) warning = "ğŸš¨ ĞĞµÑ€Ğ²Ğ½Ñ‹Ğ¹ ÑÑ€Ñ‹Ğ²! Ğ¨Ñ‚Ñ€Ğ°Ñ„Ñ‹ Ñ€Ğ°ÑÑ‚ÑƒÑ‚.";

  hud.innerHTML = `
    ğŸ•’ Ğ’Ñ€ĞµĞ¼Ñ: ${state.isNight ? "ĞĞ¾Ñ‡ÑŒ ğŸŒ™" : "Ğ”ĞµĞ½ÑŒ â˜€ï¸"}<br>
    â­ Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ: ${state.level} (XP: ${state.xp})<br>
    ğŸ’° Ğ”ĞµĞ½ÑŒĞ³Ğ¸: ${state.money}<br>
    âš¡ Ğ­Ğ½ĞµÑ€Ğ³Ğ¸Ñ: ${state.energy}<br>
    ğŸ˜µ Ğ¡Ñ‚Ñ€ĞµÑÑ: ${state.stress}<br>
    <b>${warning}</b>
  `;
}




if (state.energy <= 0) {
  alert("Ğ¢Ñ‹ Ğ²Ñ‹Ğ¶Ğ°Ñ‚. ĞÑ‚Ğ´Ñ‹Ñ…Ğ°Ğ¹.");
  return;
}

restBtn.onclick = saveState(state);() => {
  state.energy += 30;
  if (state.energy > 100) state.energy = 100;

  state.stress -= 20;
  if (state.stress < 0) state.stress = 0;
// Ğ¾Ğ¿Ñ‹Ñ‚ Ğ·Ğ° Ğ·Ğ°ĞºĞ°Ğ·
state.xp += state.isNight ? 20 : 10;

// Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑƒÑ€Ğ¾Ğ²Ğ½Ñ
if (state.xp >= state.level * 100) {
  state.xp = 0;
  state.level += 1;
  alert("ĞĞ¾Ğ²Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ â­");
}

  render();
};

  const roll = Math.random();

  // Ğ²ÑĞµĞ³Ğ´Ğ° Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ğ¼ ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ
  state.energy -= state.isNight ? 15 : 10;


  if (roll < 0.6) {
    // Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹ Ğ·Ğ°ĞºĞ°Ğ·
    state.money += state.isNight ? 80 : 50;

  } else if (roll < 0.85) {
    // Ğ±Ğ¾Ğ½ÑƒÑ
    state.money += state.isNight ? 180 : 120;

    alert("VIP ĞºĞ»Ğ¸ĞµĞ½Ñ‚ ğŸ’¸");
  } else {
    // Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ»
    state.money -= state.stress >= 100 ? 80 : 40;
   state.stress += 15;

    alert("ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ¼ ğŸ˜¡");
  }

  // ÑÑ‚Ñ€ĞµÑÑ Ñ€Ğ°ÑÑ‚Ñ‘Ñ‚ Ğ²ÑĞµĞ³Ğ´Ğ°
  state.stress += 5;

  render();
};


    render();
  </script>
  timeBtn.onclick = saveState(state);() => {
  state.isNight = !state.isNight;
  render();
};

</body>
