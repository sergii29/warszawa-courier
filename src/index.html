<body>
  <h1>Warszawa Courier</h1>

  <div id="hud"></div>

  <button id="orderBtn">–í–∑—è—Ç—å –∑–∞–∫–∞–∑</button>
  <button id="restBtn">–û—Ç–¥–æ—Ö–Ω—É—Ç—å</button>
  <button id="timeBtn">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –¥–µ–Ω—å / –Ω–æ—á—å</button>



  <script type="module">
    import { state } from "./state.js";

   const hud = document.getElementById("hud");
   const btn = document.getElementById("orderBtn");
   const restBtn = document.getElementById("restBtn");
   const timeBtn = document.getElementById("timeBtn");


  function render() {
  let warning = "";
  if (state.energy <= 0) warning = "‚ö†Ô∏è –¢—ã –≤—ã–∂–∞—Ç. –ù—É–∂–Ω–æ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å.";
  if (state.stress >= 100) warning = "üö® –ù–µ—Ä–≤–Ω—ã–π —Å—Ä—ã–≤! –®—Ç—Ä–∞—Ñ—ã —Ä–∞—Å—Ç—É—Ç.";

  hud.innerHTML = `
    üïí –í—Ä–µ–º—è: ${state.isNight ? "–ù–æ—á—å üåô" : "–î–µ–Ω—å ‚òÄÔ∏è"}<br>
    ‚≠ê –£—Ä–æ–≤–µ–Ω—å: ${state.level} (XP: ${state.xp})<br>
    üí∞ –î–µ–Ω—å–≥–∏: ${state.money}<br>
    ‚ö° –≠–Ω–µ—Ä–≥–∏—è: ${state.energy}<br>
    üòµ –°—Ç—Ä–µ—Å—Å: ${state.stress}<br>
    <b>${warning}</b>
  `;
}




btn.onclick = () => {
  if (state.energy <= 0) {
    alert("–ù–µ—Ç —ç–Ω–µ—Ä–≥–∏–∏");
    return;
  }
restBtn.onclick = () => {
  state.energy += 30;
  if (state.energy > 100) state.energy = 100;

  state.stress -= 20;
  if (state.stress < 0) state.stress = 0;
// –æ–ø—ã—Ç –∑–∞ –∑–∞–∫–∞–∑
state.xp += state.isNight ? 20 : 10;

// –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è
if (state.xp >= state.level * 100) {
  state.xp = 0;
  state.level += 1;
  alert("–ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å ‚≠ê");
}

  render();
};

  const roll = Math.random();

  // –≤—Å–µ–≥–¥–∞ —Ç—Ä–∞—Ç–∏–º —ç–Ω–µ—Ä–≥–∏—é
  state.energy -= state.isNight ? 15 : 10;


  if (roll < 0.6) {
    // –æ–±—ã—á–Ω—ã–π –∑–∞–∫–∞–∑
    state.money += state.isNight ? 80 : 50;

  } else if (roll < 0.85) {
    // –±–æ–Ω—É—Å
    state.money += state.isNight ? 180 : 120;

    alert("VIP –∫–ª–∏–µ–Ω—Ç üí∏");
  } else {
    // –ø—Ä–æ–≤–∞–ª
    state.money -= 40;
    state.stress += 15;
    alert("–ü—Ä–æ–±–ª–µ–º–∞ —Å –∑–∞–∫–∞–∑–æ–º üò°");
  }

  // —Å—Ç—Ä–µ—Å—Å —Ä–∞—Å—Ç—ë—Ç –≤—Å–µ–≥–¥–∞
  state.stress += 5;

  render();
};


    render();
  </script>
  timeBtn.onclick = () => {
  state.isNight = !state.isNight;
  render();
};

</body>
