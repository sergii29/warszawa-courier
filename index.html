<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Warsaw Courier Sim</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            padding-bottom: 60px;
        }

        .header {
            background: #2196F3;
            color: white;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .balance {
            font-size: 24px;
            font-weight: bold;
        }

        .balance.debt {
            color: #ffcdd2;
        }

        .sim-name {
            font-size: 12px;
            opacity: 0.9;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 10px;
        }

        .stat {
            background: rgba(255,255,255,0.2);
            padding: 8px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-label {
            font-size: 11px;
            opacity: 0.8;
            margin-bottom: 2px;
        }

        .stat-value {
            font-size: 16px;
            font-weight: bold;
        }

        /* –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ë–ê–ì–ê - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ */
        .stat-value.good {
            color: #4CAF50;
        }

        .stat-value.medium {
            color: #FFC107;
        }

        .stat-value.low {
            color: #FF9800;
        }

        .stat-value.critical {
            color: #F44336;
        }

        .city-section {
            background: white;
            margin: 15px;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .city-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .demo-warning {
            background: #FFF3CD;
            border: 1px solid #FFC107;
            padding: 8px;
            border-radius: 6px;
            font-size: 12px;
            margin-bottom: 10px;
            color: #856404;
        }

        .city-info {
            display: flex;
            gap: 10px;
            font-size: 13px;
        }

        .info-item {
            background: #f0f0f0;
            padding: 5px 10px;
            border-radius: 6px;
        }

        .order-section {
            background: white;
            margin: 15px;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .order-title {
            font-size: 16px;
            font-weight: bold;
        }

        .swipe-hint {
            font-size: 11px;
            background: #2196F3;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
        }

        .order-card {
            background: #f9f9f9;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
        }

        .order-status {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }

        .order-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        .detail-item {
            font-size: 13px;
        }

        .detail-label {
            color: #888;
            font-size: 11px;
        }

        .detail-value {
            font-weight: bold;
            font-size: 18px;
        }

        .vehicle-info {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
            font-size: 13px;
        }

        .searching {
            text-align: center;
            padding: 30px;
            color: #999;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2196F3;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .nav-menu {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #e0e0e0;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }

        .nav-item {
            padding: 12px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: transparent;
            transition: background 0.3s;
        }

        .nav-item:active {
            background: #f5f5f5;
        }

        .nav-item.locked {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .nav-label {
            font-size: 11px;
            color: #666;
        }

        .auth-section {
            background: white;
            margin: 15px;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .auth-title {
            font-weight: bold;
            margin-bottom: 8px;
        }

        .auth-desc {
            font-size: 12px;
            color: #666;
            margin-bottom: 12px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 8px;
            transition: opacity 0.3s;
        }

        .btn:active {
            opacity: 0.7;
        }

        .btn-primary {
            background: #2196F3;
            color: white;
        }

        .btn-danger {
            background: #F44336;
            color: white;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 12px;
            max-width: 90%;
            width: 350px;
        }

        .modal-header {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .modal-body {
            margin-bottom: 15px;
            color: #666;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <div class="header">
        <div class="top-bar">
            <div class="balance debt" id="balance">0.00 PLN</div>
            <div class="sim-name">Warsaw Courier Sim</div>
        </div>
        
        <div class="stats">
            <div class="stat">
                <div class="stat-label">–í–ï–õ–°–£–ú</div>
                <div class="stat-value good" id="energy">100</div>
            </div>
            <div class="stat">
                <div class="stat-label">–ö–ê–°–í–Ø–ó–¨</div>
                <div class="stat-value good" id="connection">100</div>
            </div>
            <div class="stat">
                <div class="stat-label">–û–î–ï–ñ–î–ê</div>
                <div class="stat-value good" id="clothes">100</div>
            </div>
            <div class="stat">
                <div class="stat-label">–°–ò–õ–´</div>
                <div class="stat-value good" id="strength">100</div>
            </div>
            <div class="stat">
                <div class="stat-label">–í–û–î–ê</div>
                <div class="stat-value good" id="water">100</div>
            </div>
            <div class="stat">
                <div class="stat-label">–ù–ê–°–¢–†</div>
                <div class="stat-value good" id="mood">100</div>
            </div>
        </div>
    </div>

    <!-- City Section -->
    <div class="city-section">
        <div class="city-title">üèôÔ∏è –í–∞—Ä—à–∞–≤–∞</div>
        <div class="demo-warning">
            ‚ö†Ô∏è –î–ï–ú–û –†–ï–ñ–ò–ú (Android/Web) –í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è!
        </div>
        <div class="city-info">
            <div class="info-item">–°–ø—Ä–æ—Å: <strong>–í—ã—Å–æ–∫–∏–π</strong></div>
            <div class="info-item">–ò–Ω—Ñ–ª—è—Ü–∏—è: <strong>–ê–∫—Ç–∏–≤–Ω–∞</strong></div>
        </div>
    </div>

    <!-- Order Section -->
    <div class="order-section">
        <div class="order-header">
            <div class="order-title">üçî –ü–æ–∏—Å–∫ –∑–∞–∫–∞–∑–∞</div>
            <div class="swipe-hint">–°–í–ê–ô–ü –î–õ–Ø –û–ù–õ–ê–ô–ù–ê</div>
        </div>
        
        <div class="order-card" id="orderCard">
            <div class="searching" id="searchingAnim">
                <div class="spinner"></div>
                <div>–ü–æ–∏—Å–∫...</div>
            </div>
            
            <div id="orderContent" style="display: none;">
                <div class="order-status">–û–∂–∏–¥–∞–Ω–∏–µ</div>
                
                <div class="order-details">
                    <div class="detail-item">
                        <div class="detail-label">–û–ø–ª–∞—Ç–∞</div>
                        <div class="detail-value" id="orderPayment">-- PLN</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ</div>
                        <div class="detail-value" id="orderDistance">-- –∫–º</div>
                    </div>
                </div>
                
                <div class="vehicle-info">
                    –°–æ—Å—Ç–æ—è–Ω–∏–µ: <strong id="vehicleCondition">100%</strong>
                </div>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 10px; font-size: 12px; color: #999;">
            –°–í–ê–ô–ü –î–õ–Ø –û–§–õ–ê–ô–ù–ê
        </div>
    </div>

    <!-- Auth Section -->
    <div class="auth-section">
        <div class="auth-title">üîê –í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
        <div class="auth-desc">
            –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –Ω–∞ Android/Web. Telegram –≤—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
        </div>
        <button class="btn btn-primary" onclick="handleAuth()">–í–æ–π—Ç–∏</button>
        <button class="btn btn-danger" onclick="resetProgress()">üîÑ –°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</button>
    </div>

    <!-- Bottom Navigation -->
    <div class="nav-menu">
        <button class="nav-item" onclick="openShop()">
            <div class="nav-icon">üè™</div>
            <div class="nav-label">–ú–∞–≥–∞–∑–∏–Ω</div>
        </button>
        <button class="nav-item" onclick="openBank()">
            <div class="nav-icon">üè¶</div>
            <div class="nav-label">–ë–∞–Ω–∫</div>
        </button>
        <button class="nav-item locked" onclick="openGarage()">
            <div class="nav-icon">üöó</div>
            <div class="nav-label">–ê–≤—Ç–æ—Å–∞–ª–æ–Ω</div>
        </button>
        <button class="nav-item" onclick="openStats()">
            <div class="nav-icon">üìä</div>
            <div class="nav-label">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
        </button>
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header" id="modalHeader">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</div>
            <div class="modal-body" id="modalBody">...</div>
            <button class="btn btn-primary" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyChrQMyO2soPgoEHq_f3aYs5Cs19q3sWEk",
            authDomain: "warszawa-courier.firebaseapp.com",
            databaseURL: "https://warszawa-courier-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "warszawa-courier",
            storageBucket: "warszawa-courier.firebasestorage.app",
            messagingSenderId: "295860613508",
            appId: "1:295860613508:web:86fe8364377d6875612dd1",
            measurementId: "G-TGSCHBVLX2"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const auth = firebase.auth();
        window.db = db;
        console.log("Firebase initialized for Warsaw Courier");

        // Game State
        let gameState = {
            balance: -7000,
            energy: 100,
            connection: 100,
            clothes: 100,
            strength: 100,
            water: 100,
            mood: 100,
            vehicleCondition: 100,
            totalDeliveries: 0
        };

        // Initialize
        function initGame() {
            loadGameState();
            updateUI();
            startGameLoop();
        }

        // Load from localStorage
        function loadGameState() {
            const saved = localStorage.getItem('warsawCourierState');
            if (saved) {
                try {
                    gameState = { ...gameState, ...JSON.parse(saved) };
                } catch (e) {
                    console.error("Error loading state:", e);
                }
            }
        }

        // Save to localStorage
        function saveGameState() {
            localStorage.setItem('warsawCourierState', JSON.stringify(gameState));
        }

        // Update UI
        function updateUI() {
            // Balance
            const balanceEl = document.getElementById('balance');
            balanceEl.textContent = gameState.balance.toFixed(2) + ' PLN';
            balanceEl.className = 'balance ' + (gameState.balance < 0 ? 'debt' : '');

            // Stats - –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ë–ê–ì–ê –ó–î–ï–°–¨!
            updateStat('energy', gameState.energy);
            updateStat('connection', gameState.connection);
            updateStat('clothes', gameState.clothes);
            updateStat('strength', gameState.strength);
            updateStat('water', gameState.water);
            updateStat('mood', gameState.mood);

            // Vehicle
            document.getElementById('vehicleCondition').textContent = Math.round(gameState.vehicleCondition) + '%';
        }

        // –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ë–ê–ì–ê - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤
        function updateStat(statName, value) {
            const statEl = document.getElementById(statName);
            if (!statEl) return;

            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
            statEl.textContent = Math.round(value);

            // –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£–¥–∞–ª—è–µ–º –í–°–ï –∫–ª–∞—Å—Å—ã —Ü–≤–µ—Ç–æ–≤ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ
            statEl.classList.remove('good', 'medium', 'low', 'critical');

            // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–ª–∞—Å—Å –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è
            if (value >= 70) {
                statEl.classList.add('good');
            } else if (value >= 40) {
                statEl.classList.add('medium');
            } else if (value >= 20) {
                statEl.classList.add('low');
            } else {
                statEl.classList.add('critical');
            }
        }

        // Game Loop
        function startGameLoop() {
            setInterval(() => {
                gameState.energy = Math.max(0, gameState.energy - 0.1);
                gameState.water = Math.max(0, gameState.water - 0.15);
                gameState.mood = Math.max(0, gameState.mood - 0.05);
                gameState.vehicleCondition = Math.max(0, gameState.vehicleCondition - 0.02);
                
                updateUI();
                saveGameState();
            }, 3000);
        }

        // Search Order
        function searchOrder() {
            document.getElementById('searchingAnim').style.display = 'block';
            document.getElementById('orderContent').style.display = 'none';
            
            setTimeout(() => {
                const payment = Math.floor(Math.random() * 50) + 30;
                const distance = (Math.random() * 5 + 1).toFixed(1);
                
                document.getElementById('orderPayment').textContent = payment + ' PLN';
                document.getElementById('orderDistance').textContent = distance + ' –∫–º';
                
                document.getElementById('searchingAnim').style.display = 'none';
                document.getElementById('orderContent').style.display = 'block';
            }, 2000);
        }

        // Complete Order
        function completeOrder() {
            const payment = parseFloat(document.getElementById('orderPayment').textContent);
            
            gameState.balance += payment;
            gameState.totalDeliveries++;
            
            gameState.energy -= 15;
            gameState.water -= 10;
            gameState.strength -= 8;
            gameState.mood -= 5;
            gameState.vehicleCondition -= 2;
            
            updateUI();
            saveGameState();
            searchOrder();
        }

        // Click on order card to complete
        document.getElementById('orderCard').addEventListener('click', function() {
            if (document.getElementById('orderContent').style.display !== 'none') {
                completeOrder();
            }
        });

        // Navigation
        function openShop() {
            showModal('üè™ –ú–∞–≥–∞–∑–∏–Ω', '–ü–æ–∫—É–ø–∫–∞ –µ–¥—ã, –≤–æ–¥—ã, –æ–¥–µ–∂–¥—ã. (–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)');
        }

        function openBank() {
            showModal('üè¶ –ë–∞–Ω–∫', '–ö—Ä–µ–¥–∏—Ç—ã –∏ –ø–æ–≥–∞—à–µ–Ω–∏–µ –¥–æ–ª–≥–æ–≤. (–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)');
        }

        function openGarage() {
            if (gameState.totalDeliveries < 50) {
                showModal('üîí –ê–≤—Ç–æ—Å–∞–ª–æ–Ω', `–¢—Ä–µ–±—É–µ—Ç—Å—è 50 –¥–æ—Å—Ç–∞–≤–æ–∫. –£ –≤–∞—Å: ${gameState.totalDeliveries}`);
            } else {
                showModal('üöó –ê–≤—Ç–æ—Å–∞–ª–æ–Ω', '–ü–æ–∫—É–ø–∫–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞. (–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)');
            }
        }

        function openStats() {
            showModal('üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞', `–î–æ—Å—Ç–∞–≤–æ–∫: ${gameState.totalDeliveries}\n–ë–∞–ª–∞–Ω—Å: ${gameState.balance.toFixed(2)} PLN`);
        }

        // Auth
        function handleAuth() {
            showModal('üîê –í—Ö–æ–¥', '–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
        }

        function resetProgress() {
            if (confirm('–£–¥–∞–ª–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å?')) {
                localStorage.clear();
                location.reload();
            }
        }

        // Modal
        function showModal(title, body) {
            document.getElementById('modalHeader').textContent = title;
            document.getElementById('modalBody').textContent = body;
            document.getElementById('modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        // Init on load
        window.addEventListener('load', () => {
            initGame();
            searchOrder();
        });
    </script>

</body>
</html>
