<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI Face Swap</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <header class="topbar">
        <div class="logo">üé≠ FACE MAGIC</div>
        <div class="balance" onclick="openShop()">
            <span id="starsVal">0</span> <i class="fa fa-star"></i>
        </div>
    </header>

    <div class="app-container">
        
        <div class="upload-card" onclick="document.getElementById('fileInput').click()">
            <img id="preview" src="" style="display:none">
            <div id="placeholder">
                <i class="fa fa-camera"></i>
                <p>–ó–∞–≥—Ä—É–∑–∏ —Ñ–æ—Ç–æ –ª–∏—Ü–∞</p>
            </div>
            <input type="file" id="fileInput" accept="image/*" hidden onchange="handleFile(this)">
        </div>

        <h3 class="section-title">–í–´–ë–ï–†–ò –û–ë–†–ê–ó:</h3>
        <div class="styles-grid">
            <div class="style-card" onclick="selectStyle('bum')">
                <div class="emoji">üóëÔ∏è</div>
                <span>–ë–æ–º–∂</span>
            </div>
            <div class="style-card" onclick="selectStyle('rich')">
                <div class="emoji">ü§µ</div>
                <span>–û–ª–∏–≥–∞—Ä—Ö</span>
            </div>
            <div class="style-card" onclick="selectStyle('gym')">
                <div class="emoji">üí™</div>
                <span>–ö–∞—á–æ–∫</span>
            </div>
            <div class="style-card" onclick="selectStyle('clown')">
                <div class="emoji">ü§°</div>
                <span>–ö–ª–æ—É–Ω</span>
            </div>
        </div>

        <div class="action-area">
            <div class="selected-style" id="selectedStyleName">–°—Ç–∏–ª—å –Ω–µ –≤—ã–±—Ä–∞–Ω</div>
            <button class="generate-btn" onclick="startGeneration()">
                –°–û–ó–î–ê–¢–¨ –û–ë–†–ê–ó
                <small id="priceLabel">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ (1/1)</small>
            </button>
        </div>

        <div id="resultModal" class="modal">
            <div class="modal-content">
                <h3>–ì–û–¢–û–í–û!</h3>
                <div class="result-wrapper">
                    <img id="resultImage" src="">
                    <div class="watermark">t.me/MagicFaceBot</div>
                </div>
                <div class="result-actions">
                    <button class="action-btn" onclick="closeResult()">–ï–©–ï –†–ê–ó</button>
                    <button class="action-btn share" onclick="tg.close()">–û–¢–ü–†–ê–í–ò–¢–¨</button>
                </div>
            </div>
        </div>

        <div id="loader" class="modal" style="background:rgba(0,0,0,0.9)">
            <div class="loader-content">
                <div class="spinner"></div>
                <p id="loaderText">–ê–Ω–∞–ª–∏–∑ –ª–∏—Ü–∞...</p>
            </div>
        </div>

        <div id="shopModal" class="modal">
            <div class="modal-content shop">
                <i class="fa fa-lock" style="font-size:40px; color:#e74c3c"></i>
                <h2>–õ–ò–ú–ò–¢ –ò–°–ß–ï–†–ü–ê–ù</h2>
                <p>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –ø–æ—Ç—Ä–∞—á–µ–Ω–∞.</p>
                <button class="buy-btn" onclick="buyPack()">
                    <div>5 –ì–ï–ù–ï–†–ê–¶–ò–ô</div>
                    <div class="price">25 Stars</div>
                </button>
                <button class="close-btn" onclick="document.getElementById('shopModal').style.display='none'">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>

    </div>

    <script src="js/firebase.js"></script>
    <script src="js/game.js"></script>
</body>
</html>
