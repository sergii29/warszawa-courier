<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Symulator ≈ªycia w Warszawie</title>
    <style>
        :root {
            --primary-color: #e74c3c; /* –ö—Ä–∞—Å–Ω—ã–π (–í–∞—Ä—à–∞–≤–∞) */
            --secondary-color: #f1c40f; /* –ó–æ–ª–æ—Ç–æ–π */
            --bg-color: #2c3e50;
            --text-color: #ecf0f1;
            --panel-bg: #34495e;
            --success: #27ae60;
            --danger: #c0392b;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            user-select: none; /* –ß—Ç–æ–±—ã –Ω–µ –≤—ã–¥–µ–ª—è—Ç—å —Ç–µ–∫—Å—Ç –ø—Ä–∏ –∫–ª–∏–∫–∞—Ö */
            overflow-x: hidden;
        }

        /* --- Header & Stats --- */
        header {
            background-color: var(--panel-bg);
            padding: 15px;
            text-align: center;
            border-bottom: 2px solid var(--primary-color);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        h1 { margin: 0; font-size: 1.5rem; color: var(--secondary-color); text-transform: uppercase; letter-spacing: 2px; }
        .subtitle { font-size: 0.8rem; opacity: 0.7; margin-bottom: 10px; }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            font-size: 0.9rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .stat-item {
            background: rgba(0,0,0,0.2);
            padding: 5px;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-label { font-size: 0.7rem; opacity: 0.8; }
        .stat-value { font-weight: bold; color: var(--secondary-color); }

        /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å–ª–µ–ø–æ–≥–æ —Ä–µ–∂–∏–º–∞ */
        .blind-mode .stat-value, 
        .blind-mode .click-value,
        .blind-mode #balance-display,
        .blind-mode .cost-display {
            filter: blur(8px);
            pointer-events: none;
            user-select: none;
        }

        /* --- Main Game Area --- */
        .game-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 15px;
            padding-bottom: 80px; /* –î–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        }

        /* --- Clicker Section --- */
        .clicker-area {
            text-align: center;
            margin-bottom: 30px;
            padding: 40px 0;
            background: var(--panel-bg);
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
            transition: transform 0.1s;
        }
        
        .clicker-area:active { transform: scale(0.98); }

        .click-btn {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--primary-color), #c0392b);
            border: 5px solid var(--secondary-color);
            color: white;
            font-size: 3rem;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.6);
            outline: none;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            transition: all 0.2s;
        }

        .click-btn:hover { box-shadow: 0 0 30px rgba(231, 76, 60, 0.9); transform: scale(1.05); }

        /* --- Tabs/Navigation --- */
        .nav-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--panel-bg);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            border-top: 1px solid #555;
            z-index: 1000;
        }

        .nav-btn {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 0.8rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            opacity: 0.6;
            cursor: pointer;
        }

        .nav-btn.active { opacity: 1; color: var(--secondary-color); }
        .nav-btn span { font-size: 1.2rem; margin-bottom: 2px; }

        /* --- Sections --- */
        .section { display: none; animation: fadeIn 0.3s; }
        .section.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .card {
            background: var(--panel-bg);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .card h3 { margin-top: 0; border-bottom: 1px solid #555; padding-bottom: 5px; display: flex; justify-content: space-between; }
        .card-desc { font-size: 0.9rem; color: #bdc3c7; margin-bottom: 10px; }
        
        .action-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            font-weight: bold;
            margin-top: 5px;
            transition: background 0.2s;
        }

        .action-btn:hover { background: #c0392b; }
        .action-btn:disabled { background: #7f8c8d; cursor: not-allowed; }
        
        .buy-btn { background: var(--success); }
        .buy-btn:hover { background: #219150; }

        /* --- Inventory Grid --- */
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
        }

        .inv-item {
            background: rgba(0,0,0,0.3);
            border: 1px solid #555;
            border-radius: 5px;
            padding: 5px;
            text-align: center;
            font-size: 0.8rem;
            cursor: pointer;
        }
        .inv-item.equipped { border-color: var(--secondary-color); background: rgba(241, 196, 15, 0.1); }

        /* --- Bank & Crypto --- */
        .market-row { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .trend-up { color: var(--success); }
        .trend-down { color: var(--danger); }

        /* --- Toast Notifications --- */
        .toast-container {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 2000;
        }
        .toast {
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            margin-bottom: 10px;
            border-left: 4px solid var(--secondary-color);
            animation: slideIn 0.3s, fadeOut 0.5s 2.5s forwards;
        }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
        @keyframes fadeOut { to { opacity: 0; visibility: hidden; } }

        /* --- Modal --- */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 3000;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: var(--panel-bg);
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            border: 2px solid var(--secondary-color);
        }
        .modal input {
            width: 80%;
            padding: 10px;
            margin: 10px 0;
            background: #2c3e50;
            border: 1px solid #555;
            color: white;
            border-radius: 5px;
        }
        .close-modal {
            position: absolute;
            top: 10px; right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .level-up-anim {
            position: absolute;
            color: var(--secondary-color);
            font-weight: bold;
            font-size: 1.5rem;
            pointer-events: none;
            animation: floatUp 1s forwards;
        }
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }

        .blind-timer {
            position: fixed;
            top: 5px;
            left: 5px;
            background: #c0392b;
            color: white;
            padding: 2px 5px;
            font-size: 0.7rem;
            z-index: 5000;
            border-radius: 3px;
            display: none;
        }

    </style>
</head>
<body>

<header>
    <h1>WARSZAWA SIM <span style="font-size:0.5em">2026</span></h1>
    <div class="subtitle">–í—ã–∂–∏–≤–∏ –≤ —Å—Ç–æ–ª–∏—Ü–µ</div>
    
    <div class="stats-grid">
        <div class="stat-item">
            <span class="stat-label">–ë–∞–ª–∞–Ω—Å (PLN)</span>
            <span class="stat-value" id="balance-display">0.00</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">–≠–Ω–µ—Ä–≥–∏—è</span>
            <span class="stat-value" id="energy-display">100/100</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">–í–æ–¥–∞</span>
            <span class="stat-value" id="water-display">100/100</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">–£—Ä–æ–≤–µ–Ω—å</span>
            <span class="stat-value" id="level-display">1</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">–†–µ–π—Ç–∏–Ω–≥</span>
            <span class="stat-value" id="rating-display">0</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">–°–∫–∏–Ω</span>
            <span class="stat-value" id="skin-display">–ë–æ–º–∂</span>
        </div>
    </div>
    <div id="blind-timer-display" class="blind-timer">Blind: 00:00</div>
</header>

<div class="game-container">
    
    <div class="toast-container" id="toast-container"></div>

    <div id="section-earn" class="section active">
        <div class="clicker-area">
            <button class="click-btn" id="collect-btn">üçæ</button>
            <p style="margin-top:15px; color:#bdc3c7;">–ù–∞–∂–º–∏, —á—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å –±—É—Ç—ã–ª–∫—É</p>
            <p style="font-size: 0.8rem; color: #7f8c8d;">–®–∞–Ω—Å –Ω–∞–π—Ç–∏ –ø—Ä–æ–µ–∑–¥–Ω–æ–π: 1%</p>
        </div>

        <div class="card">
            <h3>–ö–∞—Ä—å–µ—Ä–∞ –ö—É—Ä—å–µ—Ä–∞ (–ê–≤—Ç–æ)</h3>
            <p class="card-desc">–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–µ–ª–æ—Å–∏–ø–µ–¥ –∏–ª–∏ —Å–∞–º–æ–∫–∞—Ç. –¢—Ä–∞—Ç–∏—Ç –≤–æ–¥—É –∏ —ç–Ω–µ—Ä–≥–∏—é. –ü—Ä–∏–Ω–æ—Å–∏—Ç –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥.</p>
            <p id="courier-status" style="font-size:0.9rem; color:var(--secondary-color);">–°—Ç–∞—Ç—É—Å: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç</p>
            <button class="action-btn" id="courier-toggle-btn" onclick="toggleCourier()">–ù–∞—á–∞—Ç—å —Å–º–µ–Ω—É</button>
        </div>
    </div>

    <div id="section-shop" class="section">
        <h2>–ú–∞–≥–∞–∑–∏–Ω "≈ªabka"</h2>
        
        <div class="card">
            <h3>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ</h3>
            <div style="display:flex; gap:5px;">
                <button class="action-btn buy-btn" onclick="buyItem('water')">–í–æ–¥–∞ (+30) <span class="cost-display">5 PLN</span></button>
                <button class="action-btn buy-btn" onclick="buyItem('food')">–•–æ—Ç-–¥–æ–≥ (+30 –≠–Ω) <span class="cost-display">8 PLN</span></button>
            </div>
            <div style="margin-top:5px;">
                <button class="action-btn buy-btn" onclick="buyItem('energy_drink')">–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫ (–ü–∞—É–∑–∞ –≠–Ω.) <span class="cost-display">12 PLN</span></button>
                <p style="font-size: 0.7rem; color: #aaa; margin: 2px 0;">*–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç—Ä–∞—Ç—É –≠–Ω–µ—Ä–≥–∏–∏ –Ω–∞ 60—Å. –í–æ–¥–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ç—Ä–∞—Ç–∏—Ç—å—Å—è!</p>
            </div>
        </div>

        <div class="card">
            <h3>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç (–î–ª—è –∫—É—Ä—å–µ—Ä–∞)</h3>
            <button class="action-btn buy-btn" id="btn-buy-bike" onclick="buyUpgrade('bike')">–ö—É–ø–∏—Ç—å –í–µ–ª–æ—Å–∏–ø–µ–¥ <span class="cost-display">150 PLN</span></button>
            <button class="action-btn buy-btn" id="btn-buy-scooter" onclick="buyUpgrade('scooter')" style="margin-top:5px;">–ö—É–ø–∏—Ç—å –≠–ª–µ–∫—Ç—Ä–æ—Å–∞–º–æ–∫–∞—Ç <span class="cost-display">400 PLN</span></button>
        </div>

        <div class="card">
            <h3>–û–¥–µ–∂–¥–∞ (–°–∫–∏–Ω—ã)</h3>
            <p class="card-desc">–ü–æ–≤—ã—à–∞–µ—Ç –¥–æ—Ö–æ–¥ –∑–∞ –∫–ª–∏–∫.</p>
            <button class="action-btn buy-btn" id="btn-skin-civil" onclick="buySkin('civil')">–û–±—ã—á–Ω–∞—è –æ–¥–µ–∂–¥–∞ (x1.5) <span class="cost-display">100 PLN</span></button>
            <button class="action-btn buy-btn" id="btn-skin-suit" onclick="buySkin('suit')" style="margin-top:5px;">–ö–æ—Å—Ç—é–º (x2.0) <span class="cost-display">500 PLN</span></button>
            <button class="action-btn buy-btn" id="btn-skin-adidas" onclick="buySkin('adidas')" style="margin-top:5px;">Adidas Tracksuit (x3.0) <span class="cost-display">1200 PLN</span></button>
        </div>

        <div class="card">
            <h3>–ö–∞—Ä—å–µ—Ä–∞ / –ë–æ–Ω—É—Å—ã</h3>
            <p class="card-desc">–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –Ω–∞–≤—ã–∫–æ–≤.</p>
            
            <div style="margin-bottom: 10px; border-bottom: 1px solid #444; padding-bottom: 5px;">
                <strong>–£–¥–∞—á–∞ (LUCK)</strong>
                <p style="font-size:0.8rem; margin:2px 0; color:#aaa;">–ü–æ–≤—ã—à–∞–µ—Ç —à–∞–Ω—Å –Ω–∞–π—Ç–∏ –¥–æ—Ä–æ–≥–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã –∏ –ø—Ä–æ–µ–∑–¥–Ω—ã–µ.</p>
                <button class="action-btn buy-btn" onclick="buyCareer('luck')">–ö—É–ø–∏—Ç—å (+1%) <span class="cost-display" id="cost-luck">50 PLN</span></button>
            </div>

            <div style="margin-bottom: 10px; border-bottom: 1px solid #444; padding-bottom: 5px;">
                <strong>–í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å (STAMINA)</strong>
                <p style="font-size:0.8rem; margin:2px 0; color:#aaa;">–°–Ω–∏–∂–∞–µ—Ç —Ä–∞—Å—Ö–æ–¥ —ç–Ω–µ—Ä–≥–∏–∏ –ø—Ä–∏ –¥–µ–π—Å—Ç–≤–∏—è—Ö –Ω–∞ 5%.</p>
                <button class="action-btn buy-btn" onclick="buyCareer('stamina')">–ö—É–ø–∏—Ç—å (–£—Ä. <span id="lvl-stamina">0</span>) <span class="cost-display" id="cost-stamina">60 PLN</span></button>
            </div>

            <div>
                <strong>–•–∞—Ä–∏–∑–º–∞ (CHARISMA)</strong>
                <p style="font-size:0.8rem; margin:2px 0; color:#aaa;">–°–Ω–∏–∂–∞–µ—Ç —Ü–µ–Ω—ã –≤ –º–∞–≥–∞–∑–∏–Ω–µ –Ω–∞ 2% –∑–∞ —É—Ä–æ–≤–µ–Ω—å.</p>
                <button class="action-btn buy-btn" onclick="buyCareer('charisma')">–ö—É–ø–∏—Ç—å (–£—Ä. <span id="lvl-charisma">0</span>) <span class="cost-display" id="cost-charisma">80 PLN</span></button>
            </div>
        </div>

        <div class="card">
            <h3>–¢–µ–Ω–µ–≤–æ–π –î–∏–ª–µ—Ä (Free LVL)</h3>
            <p class="card-desc">–ü–æ–ª—É—á–∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥, –Ω–æ —Å –ø–æ–¥–≤–æ—Ö–æ–º...</p>
            <button class="action-btn" style="background:#8e44ad;" onclick="openFreeLvlModal()">–ò—Å–ø—ã—Ç–∞—Ç—å —É–¥–∞—á—É</button>
        </div>
    </div>

    <div id="section-inventory" class="section">
        <h2>–†—é–∫–∑–∞–∫</h2>
        <div class="inventory-grid" id="inventory-container">
            <p style="grid-column: 1/-1; text-align:center; color:#7f8c8d;">–ü—É—Å—Ç–æ...</p>
        </div>
    </div>

    <div id="section-finance" class="section">
        <h2>–§–∏–Ω–∞–Ω—Å—ã</h2>
        
        <div class="card">
            <h3>–ë–∞–Ω–∫ "PKO"</h3>
            <p>–ù–∞ –¥–µ–ø–æ–∑–∏—Ç–µ: <span id="bank-deposit">0.00</span> PLN</p>
            <p style="font-size: 0.8rem; color: #f39c12;">–°—Ç–∞–≤–∫–∞: 0.5% –≤ –º–∏–Ω—É—Ç—É</p>
            
            <div style="background: rgba(192, 57, 43, 0.2); padding: 5px; border-radius: 5px; margin-bottom: 5px; font-size: 0.8rem; border-left: 3px solid #c0392b;">
                <strong>–í–Ω–∏–º–∞–Ω–∏–µ!</strong><br>
                –ü–µ—Ä–≤—ã–π –≤–∫–ª–∞–¥: <strong>0%</strong> –∫–æ–º–∏—Å—Å–∏—è.<br>
                –î–æ–∫–ª–∞–¥—ã–≤–∞–Ω–∏–µ: <strong>60%</strong> –∫–æ–º–∏—Å—Å–∏—è.<br>
                –°–Ω—è—Ç–∏–µ: <strong>-30%</strong> —à—Ç—Ä–∞—Ñ.
            </div>

            <div style="display:flex; gap:5px;">
                <button class="action-btn" onclick="openBank('deposit')">–ü–æ–ª–æ–∂–∏—Ç—å</button>
                <button class="action-btn" style="background: #e67e22;" onclick="openBank('withdraw')">–°–Ω—è—Ç—å</button>
            </div>
        </div>

        <div class="card">
            <h3>–ö—Ä–∏–ø—Ç–æ-–±–∏—Ä–∂–∞</h3>
            <div class="market-row">
                <span>Bitcoin (BTC)</span>
                <span id="price-btc">150.00</span>
            </div>
            <div class="market-row">
                <span>Ethereum (ETH)</span>
                <span id="price-eth">10.00</span>
            </div>
            <div style="margin-top:10px; display:flex; gap:5px;">
                <button class="action-btn" onclick="openCrypto('btc')">–¢–æ—Ä–≥–æ–≤–∞—Ç—å BTC</button>
                <button class="action-btn" onclick="openCrypto('eth')">–¢–æ—Ä–≥–æ–≤–∞—Ç—å ETH</button>
            </div>
            <p style="font-size:0.8rem; color:#7f8c8d; margin-top:5px;">–£ –≤–∞—Å: <span id="wallet-btc">0</span> BTC, <span id="wallet-eth">0</span> ETH</p>
        </div>
    </div>

    <div id="section-profile" class="section">
        <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
        <div class="card">
            <h3>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</h3>
            <p class="card-desc">–ö–ª—é—á —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: WARSZAWA_FOREVER</p>
            <button class="action-btn" onclick="saveGame()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–≥—Ä—É</button>
            <button class="action-btn" style="background:#7f8c8d; margin-top:5px;" onclick="resetGame()">–°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</button>
            <div style="margin-top:10px;">
                <textarea id="save-code-area" style="width:100%; height:50px; background:#222; color:#fff; border:1px solid #555;"></textarea>
                <button class="action-btn" onclick="loadGame()">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–¥</button>
            </div>
        </div>
    </div>

</div>

<nav class="nav-bar">
    <button class="nav-btn active" onclick="switchSection('earn')"><span>üçæ</span>–†–∞–±–æ—Ç–∞</button>
    <button class="nav-btn" onclick="switchSection('shop')"><span>üõí</span>–ú–∞–≥–∞–∑–∏–Ω</button>
    <button class="nav-btn" onclick="switchSection('inventory')"><span>üéí</span>–†—é–∫–∑–∞–∫</button>
    <button class="nav-btn" onclick="switchSection('finance')"><span>üìà</span>–§–∏–Ω–∞–Ω—Å—ã</button>
    <button class="nav-btn" onclick="switchSection('profile')"><span>‚öôÔ∏è</span>–ú–µ–Ω—é</button>
</nav>

<div id="bank-modal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal('bank-modal')">&times;</span>
        <h3 id="bank-modal-title">–ë–∞–Ω–∫</h3>
        <p id="bank-modal-info"></p>
        <input type="number" id="bank-input" placeholder="–°—É–º–º–∞">
        <button class="action-btn" id="bank-action-btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
    </div>
</div>

<div id="crypto-modal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal('crypto-modal')">&times;</span>
        <h3 id="crypto-modal-title">–¢–æ—Ä–≥–æ–≤–ª—è</h3>
        <p>–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞: <span id="crypto-current-price"></span> PLN</p>
        <input type="number" id="crypto-input" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ">
        <div style="display:flex; gap:5px;">
            <button class="action-btn buy-btn" id="crypto-buy-btn">–ö—É–ø–∏—Ç—å</button>
            <button class="action-btn" style="background:#c0392b;" id="crypto-sell-btn">–ü—Ä–æ–¥–∞—Ç—å</button>
        </div>
    </div>
</div>

<div id="freelvl-modal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal('freelvl-modal')">&times;</span>
        <h3>–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π LVL</h3>
        <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É. –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å +0.5, +0.7, +1.0 –∏–ª–∏ +1.5 –∫ —Ä–µ–π—Ç–∏–Ω–≥—É.</p>
        <p style="color:#e74c3c; font-size:0.9rem;">–¶–µ–Ω–∞: 10 –º–∏–Ω—É—Ç "–°–ª–µ–ø–æ—Ç—ã" (—Å–∫—Ä—ã—Ç –±–∞–ª–∞–Ω—Å –∏ —Ü–µ–Ω—ã).</p>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:5px;">
            <button class="action-btn" onclick="activateFreeLvl()">–ö–∞—Ä—Ç–∞ 1</button>
            <button class="action-btn" onclick="activateFreeLvl()">–ö–∞—Ä—Ç–∞ 2</button>
            <button class="action-btn" onclick="activateFreeLvl()">–ö–∞—Ä—Ç–∞ 3</button>
            <button class="action-btn" onclick="activateFreeLvl()">–ö–∞—Ä—Ç–∞ 4</button>
        </div>
    </div>
</div>

<script>
    // --- GAME STATE ---
    const SAVE_KEY = "WARSZAWA_FOREVER";
    
    let gameData = {
        balance: 0,
        energy: 100,
        water: 100,
        level: 1,
        rating: 0,
        xp: 0,
        inventory: [],
        upgrades: {
            bike: false,
            scooter: false
        },
        career: {
            luck: 0,
            stamina: 0,
            charisma: 0
        },
        skin: 'civil', // civil, suit, adidas
        bankDeposit: 0,
        crypto: {
            btc: 0,
            eth: 0
        },
        courierActive: false,
        lastSaveTime: Date.now(),
        stats: {
            bottles: 0
        },
        blindModeUntil: 0 // Timestamp when blind mode ends
    };

    // Prices & Config
    const PRICES = {
        water: 5,
        food: 8,
        energy_drink: 12,
        bike: 150,
        scooter: 400,
        skin_civil: 100,
        skin_suit: 500,
        skin_adidas: 1200
    };

    const CAREER_COSTS = {
        luck: { base: 50, growth: 1.5 },
        stamina: { base: 60, growth: 1.4 },
        charisma: { base: 80, growth: 1.4 }
    };

    // Runtime variables
    let cryptoPrices = { btc: 150, eth: 10 };
    let energyPauseUntil = 0; // Timestamp
    let courierInterval = null;
    let autoSaveInterval = null;

    // --- INITIALIZATION ---
    window.onload = function() {
        loadGameLocal();
        updateUI();
        startLoops();
    };

    function startLoops() {
        // Energy/Water ticker
        setInterval(() => {
            const now = Date.now();
            
            // Passive drain
            if (now > energyPauseUntil) {
                gameData.energy = Math.max(0, gameData.energy - 0.5);
            }
            gameData.water = Math.max(0, gameData.water - 0.8);

            // Bank Interest (0.5% per minute -> ~0.0083 per sec)
            if (gameData.bankDeposit > 0) {
                gameData.bankDeposit += gameData.bankDeposit * 0.00008; 
            }

            // Crypto Fluctuations
            if (Math.random() > 0.7) fluctuateCrypto();

            // Blind Mode Check
            checkBlindMode();

            updateUI();
        }, 1000);

        // Courier Work
        if (gameData.courierActive) startCourierWork();

        // Autosave
        autoSaveInterval = setInterval(saveGame, 30000);
    }

    // --- CORE MECHANICS ---
    
    // Clicker
    document.getElementById('collect-btn').addEventListener('click', (e) => {
        if (gameData.energy < 1) {
            showToast("–ù–µ—Ç —ç–Ω–µ—Ä–≥–∏–∏!", "danger");
            return;
        }

        // Calculate reward
        let baseReward = 0.5 + (gameData.level * 0.1);
        
        // Skin Multiplier
        let multiplier = 1;
        if (gameData.skin === 'suit') multiplier = 2.0;
        if (gameData.skin === 'adidas') multiplier = 3.0;
        if (gameData.skin === 'civil') multiplier = 1.5;

        // Random fluctuation (+- 20%)
        let fluctuation = (Math.random() * 0.4) + 0.8; 
        
        let finalAmount = baseReward * multiplier * fluctuation;

        // Luck Bonus (Critical Hit)
        let isCrit = false;
        if (Math.random() < (gameData.career.luck * 0.01)) {
            finalAmount *= 5;
            isCrit = true;
            showToast("–£–¥–∞—á–∞! –°—É–ø–µ—Ä-–±—É—Ç—ã–ª–∫–∞!", "success");
        }

        gameData.balance += finalAmount;
        
        // Stamina logic (Energy drain reduction)
        let drain = 1;
        let staminaSave = gameData.career.stamina * 0.05; // 5% per level
        if (Math.random() < staminaSave) drain = 0;

        gameData.energy = Math.max(0, gameData.energy - drain);
        gameData.xp += 1;
        gameData.stats.bottles++;

        checkLevelUp();
        spawnFloatingText(e, `+${finalAmount.toFixed(2)} PLN`, isCrit);
        
        // Random Item Drop (1% base + luck)
        let dropChance = 0.01 + (gameData.career.luck * 0.005);
        if (Math.random() < dropChance) {
            findItem();
        }

        updateUI();
    });

    function findItem() {
        const items = ['–°—Ç–∞—Ä—ã–π –±–∏–ª–µ—Ç', '–ó–∞–∂–∏–≥–∞–ª–∫–∞', '–ú–æ–Ω–µ—Ç–∞', '–ñ–≤–∞—á–∫–∞'];
        const item = items[Math.floor(Math.random() * items.length)];
        gameData.inventory.push(item);
        showToast(`–ù–∞–π–¥–µ–Ω–æ: ${item}`, "success");
        renderInventory();
    }

    function checkLevelUp() {
        let reqXp = gameData.level * 100;
        if (gameData.xp >= reqXp) {
            gameData.level++;
            gameData.xp = 0;
            gameData.energy = 100; // Restore energy
            showToast(`–£—Ä–æ–≤–µ–Ω—å –ø–æ–≤—ã—à–µ–Ω: ${gameData.level}!`, "success");
        }
    }

    // --- COURIER JOB ---
    function toggleCourier() {
        if (!gameData.upgrades.bike && !gameData.upgrades.scooter) {
            showToast("–ù—É–∂–µ–Ω —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç (–í–µ–ª–æ—Å–∏–ø–µ–¥/–°–∞–º–æ–∫–∞—Ç)!", "danger");
            return;
        }
        
        gameData.courierActive = !gameData.courierActive;
        
        if (gameData.courierActive) {
            startCourierWork();
            document.getElementById('courier-toggle-btn').innerText = "–ó–∞–∫–æ–Ω—á–∏—Ç—å —Å–º–µ–Ω—É";
            document.getElementById('courier-toggle-btn').style.background = "#c0392b";
            document.getElementById('courier-status').innerText = "–°—Ç–∞—Ç—É—Å: –†–ê–ë–û–¢–ê–ï–¢";
            document.getElementById('courier-status').style.color = "#27ae60";
        } else {
            clearInterval(courierInterval);
            document.getElementById('courier-toggle-btn').innerText = "–ù–∞—á–∞—Ç—å —Å–º–µ–Ω—É";
            document.getElementById('courier-toggle-btn').style.background = "#27ae60";
            document.getElementById('courier-status').innerText = "–°—Ç–∞—Ç—É—Å: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç";
            document.getElementById('courier-status').style.color = "#e74c3c";
        }
    }

    function startCourierWork() {
        if (courierInterval) clearInterval(courierInterval);
        
        courierInterval = setInterval(() => {
            if (!gameData.courierActive) return;

            // Resource cost
            // Energy drink pauses energy drain, but NOT water
            let energyCost = 2;
            if (Date.now() < energyPauseUntil) {
                energyCost = 0; 
            }
            
            // Stamina reduces energy cost
            if (gameData.career.stamina > 0) {
                 let reduction = gameData.career.stamina * 0.2; // 0.2 energy less per level
                 energyCost = Math.max(0.5, energyCost - reduction);
            }

            let waterCost = 3;

            if (gameData.energy < energyCost || gameData.water < waterCost) {
                gameData.courierActive = false;
                toggleCourier(); // Update UI
                showToast("–ö—É—Ä—å–µ—Ä: –∏—Å—Ç–æ—â–µ–Ω–∏–µ! –†–∞–±–æ—Ç–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.", "danger");
                return;
            }

            gameData.energy -= energyCost;
            gameData.water -= waterCost;

            // Earnings
            let earnings = gameData.upgrades.scooter ? 8 : 4; // Scooter earns more
            
            gameData.balance += earnings;
            gameData.rating += 0.01;

            updateUI();

        }, 3000); // Every 3 seconds
    }

    // --- SHOP & UPGRADES ---
    function getPrice(basePrice) {
        // Charisma discount
        let discount = gameData.career.charisma * 0.02; // 2% per level
        if (discount > 0.5) discount = 0.5; // Max 50% discount
        return basePrice * (1 - discount);
    }

    function buyItem(type) {
        let cost = getPrice(PRICES[type]);
        if (gameData.balance >= cost) {
            gameData.balance -= cost;
            if (type === 'water') gameData.water = Math.min(100, gameData.water + 30);
            if (type === 'food') gameData.energy = Math.min(100, gameData.energy + 30);
            if (type === 'energy_drink') {
                // Pauses energy drain for 60s, water still drains
                energyPauseUntil = Date.now() + 60000;
                showToast("–≠–Ω–µ—Ä–≥–∏—è –Ω–µ —Ç—Ä–∞—Ç–∏—Ç—Å—è 60 —Å–µ–∫!", "success");
            }
            showToast("–ö—É–ø–ª–µ–Ω–æ!", "success");
            updateUI();
        } else {
            showToast("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥", "danger");
        }
    }

    function buyUpgrade(type) {
        let cost = getPrice(PRICES[type]);
        if (gameData.balance >= cost && !gameData.upgrades[type]) {
            gameData.balance -= cost;
            gameData.upgrades[type] = true;
            document.getElementById(`btn-buy-${type}`).disabled = true;
            document.getElementById(`btn-buy-${type}`).innerText = "–ö—É–ø–ª–µ–Ω–æ";
            showToast("–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –∫—É–ø–ª–µ–Ω!", "success");
            updateUI();
        }
    }

    function buySkin(type) {
        let priceKey = `skin_${type}`;
        let cost = getPrice(PRICES[priceKey]);
        
        if (gameData.balance >= cost) {
            gameData.balance -= cost;
            gameData.skin = type;
            showToast("–°–∫–∏–Ω –∏–∑–º–µ–Ω–µ–Ω!", "success");
            updateUI();
        }
    }

    function buyCareer(type) {
        let currentLvl = gameData.career[type];
        let cost = Math.floor(CAREER_COSTS[type].base * Math.pow(CAREER_COSTS[type].growth, currentLvl));
        
        let finalCost = getPrice(cost);

        if (gameData.balance >= finalCost) {
            gameData.balance -= finalCost;
            gameData.career[type]++;
            showToast(`${type.toUpperCase()} —É–ª—É—á—à–µ–Ω!`, "success");
            updateUI();
        } else {
            showToast("–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –¥–µ–Ω–µ–≥", "danger");
        }
    }

    // --- BLIND MODE / FREE LVL ---
    function openFreeLvlModal() {
        if (isBlindModeActive()) {
            showToast("–í—ã —É–∂–µ –ø–æ–¥ —ç—Ñ—Ñ–µ–∫—Ç–æ–º!", "danger");
            return;
        }
        document.getElementById('freelvl-modal').style.display = 'flex';
    }

    function activateFreeLvl() {
        closeModal('freelvl-modal');
        
        // Random rating gain
        const rewards = [0.5, 0.7, 1.0, 1.5];
        const gain = rewards[Math.floor(Math.random() * rewards.length)];
        
        gameData.rating += gain;
        showToast(`–ü–æ–ª—É—á–µ–Ω–æ +${gain} –∫ —Ä–µ–π—Ç–∏–Ω–≥—É!`, "success");

        // Activate Blindness for 10 mins (600,000 ms)
        gameData.blindModeUntil = Date.now() + 600000;
        checkBlindMode();
    }

    function isBlindModeActive() {
        return Date.now() < gameData.blindModeUntil;
    }

    function checkBlindMode() {
        const body = document.body;
        const timerDisplay = document.getElementById('blind-timer-display');
        
        if (isBlindModeActive()) {
            body.classList.add('blind-mode');
            timerDisplay.style.display = 'block';
            
            let remaining = Math.ceil((gameData.blindModeUntil - Date.now()) / 1000);
            let mins = Math.floor(remaining / 60);
            let secs = remaining % 60;
            timerDisplay.innerText = `Blind: ${mins}:${secs < 10 ? '0'+secs : secs}`;
        } else {
            body.classList.remove('blind-mode');
            timerDisplay.style.display = 'none';
        }
    }

    // --- BANK & CRYPTO (NEW LOGIC) ---
    function openBank(action) {
        const modal = document.getElementById('bank-modal');
        const title = document.getElementById('bank-modal-title');
        const info = document.getElementById('bank-modal-info');
        const btn = document.getElementById('bank-action-btn');
        const input = document.getElementById('bank-input');
        
        input.value = '';
        modal.style.display = 'flex';

        if (action === 'deposit') {
            title.innerText = "–í–∫–ª–∞–¥ –≤ –±–∞–Ω–∫";
            
            // –ï—Å–ª–∏ –Ω–∞ —Å—á–µ—Ç—É —É–∂–µ –µ—Å—Ç—å –¥–µ–Ω—å–≥–∏ (>0), —Ç–æ –∫–æ–º–∏—Å—Å–∏—è 60%. –ï—Å–ª–∏ 0 - —Ç–æ 0%.
            let feeText = gameData.bankDeposit > 0 ? "–ö–æ–º–∏—Å—Å–∏—è: 60%" : "–ö–æ–º–∏—Å—Å–∏—è: 0%";
            
            info.innerHTML = `–î–æ—Å—Ç—É–ø–Ω–æ: ${gameData.balance.toFixed(2)} PLN<br><span style="color:#e74c3c">${feeText}</span>`;
            
            btn.onclick = () => {
                let amount = parseFloat(input.value);
                if (amount > 0 && amount <= gameData.balance) {
                    
                    let fee = 0;
                    if (gameData.bankDeposit > 0) {
                        fee = amount * 0.60;
                    }

                    let toDeposit = amount - fee;
                    
                    if (confirm(`–í–Ω–µ—Å—Ç–∏ ${amount}? –ö–æ–º–∏—Å—Å–∏—è –±–∞–Ω–∫–∞: ${fee.toFixed(2)}. –ù–∞ —Å—á–µ—Ç –ø–æ–ø–∞–¥–µ—Ç: ${toDeposit.toFixed(2)}`)) {
                        gameData.balance -= amount;
                        gameData.bankDeposit += toDeposit;
                        closeModal('bank-modal');
                        updateUI();
                        showToast(`–í–Ω–µ—Å–µ–Ω–æ ${toDeposit.toFixed(2)} PLN`, "success");
                    }
                }
            };
        } else {
            title.innerText = "–°–Ω—è—Ç–∏–µ —Å–æ —Å—á–µ—Ç–∞";
            // –®—Ç—Ä–∞—Ñ 30% –Ω–∞ –≤—ã–≤–æ–¥
            info.innerHTML = `–í –±–∞–Ω–∫–µ: ${gameData.bankDeposit.toFixed(2)} PLN<br><span style="color:#e74c3c">–®—Ç—Ä–∞—Ñ: 30%</span>`;
            
            btn.onclick = () => {
                let amount = parseFloat(input.value);
                if (amount > 0 && amount <= gameData.bankDeposit) {
                    let penalty = amount * 0.30;
                    let toReceive = amount - penalty;

                    if (confirm(`–°–Ω—è—Ç—å ${amount}? –®—Ç—Ä–∞—Ñ –±–∞–Ω–∫–∞: ${penalty.toFixed(2)}. –í—ã –ø–æ–ª—É—á–∏—Ç–µ: ${toReceive.toFixed(2)}`)) {
                        gameData.bankDeposit -= amount;
                        gameData.balance += toReceive;
                        closeModal('bank-modal');
                        updateUI();
                        showToast(`–°–Ω—è—Ç–æ ${toReceive.toFixed(2)} PLN`, "success");
                    }
                }
            };
        }
    }

    function fluctuateCrypto() {
        cryptoPrices.btc = Math.max(10, cryptoPrices.btc * (0.9 + Math.random() * 0.2));
        cryptoPrices.eth = Math.max(1, cryptoPrices.eth * (0.85 + Math.random() * 0.3));
        updateUI();
    }

    function openCrypto(coin) {
        const modal = document.getElementById('crypto-modal');
        const title = document.getElementById('crypto-modal-title');
        const priceDisplay = document.getElementById('crypto-current-price');
        const input = document.getElementById('crypto-input');
        
        let price = coin === 'btc' ? cryptoPrices.btc : cryptoPrices.eth;
        
        title.innerText = `–¢–æ—Ä–≥–æ–≤–ª—è ${coin.toUpperCase()}`;
        priceDisplay.innerText = price.toFixed(2);
        input.value = '';
        modal.style.display = 'flex';

        document.getElementById('crypto-buy-btn').onclick = () => {
            let qty = parseFloat(input.value);
            let cost = qty * price;
            if (qty > 0 && gameData.balance >= cost) {
                gameData.balance -= cost;
                gameData.crypto[coin] += qty;
                showToast(`–ö—É–ø–ª–µ–Ω–æ ${qty} ${coin}`, "success");
                closeModal('crypto-modal');
                updateUI();
            }
        };

        document.getElementById('crypto-sell-btn').onclick = () => {
            let qty = parseFloat(input.value);
            if (qty > 0 && gameData.crypto[coin] >= qty) {
                let earnings = qty * price;
                gameData.balance += earnings;
                gameData.crypto[coin] -= qty;
                showToast(`–ü—Ä–æ–¥–∞–Ω–æ ${qty} ${coin}`, "success");
                closeModal('crypto-modal');
                updateUI();
            }
        };
    }

    // --- UI HELPERS ---
    function updateUI() {
        // Stats
        document.getElementById('balance-display').innerText = gameData.balance.toFixed(2);
        document.getElementById('energy-display').innerText = Math.floor(gameData.energy) + '/100';
        document.getElementById('water-display').innerText = Math.floor(gameData.water) + '/100';
        document.getElementById('level-display').innerText = gameData.level;
        document.getElementById('rating-display').innerText = gameData.rating.toFixed(1);
        document.getElementById('skin-display').innerText = gameData.skin.toUpperCase();
        
        // Bank & Crypto
        document.getElementById('bank-deposit').innerText = gameData.bankDeposit.toFixed(2);
        document.getElementById('price-btc').innerText = cryptoPrices.btc.toFixed(2);
        document.getElementById('price-eth').innerText = cryptoPrices.eth.toFixed(2);
        document.getElementById('wallet-btc').innerText = gameData.crypto.btc.toFixed(4);
        document.getElementById('wallet-eth').innerText = gameData.crypto.eth.toFixed(4);

        // Crypto trends (simple visual)
        document.getElementById('price-btc').className = Math.random() > 0.5 ? 'trend-up' : 'trend-down';

        // Career Costs Update
        let luckCost = Math.floor(CAREER_COSTS.luck.base * Math.pow(CAREER_COSTS.luck.growth, gameData.career.luck));
        let staminaCost = Math.floor(CAREER_COSTS.stamina.base * Math.pow(CAREER_COSTS.stamina.growth, gameData.career.stamina));
        let charismaCost = Math.floor(CAREER_COSTS.charisma.base * Math.pow(CAREER_COSTS.charisma.growth, gameData.career.charisma));

        document.getElementById('cost-luck').innerText = getPrice(luckCost).toFixed(0) + " PLN";
        document.getElementById('cost-stamina').innerText = getPrice(staminaCost).toFixed(0) + " PLN";
        document.getElementById('cost-charisma').innerText = getPrice(charismaCost).toFixed(0) + " PLN";
        
        document.getElementById('lvl-stamina').innerText = gameData.career.stamina;
        document.getElementById('lvl-charisma').innerText = gameData.career.charisma;

        renderInventory();
    }

    function renderInventory() {
        const container = document.getElementById('inventory-container');
        container.innerHTML = '';
        if (gameData.inventory.length === 0) {
            container.innerHTML = '<p style="grid-column: 1/-1; text-align:center; color:#7f8c8d;">–ü—É—Å—Ç–æ</p>';
            return;
        }
        gameData.inventory.forEach((item, index) => {
            let div = document.createElement('div');
            div.className = 'inv-item';
            div.innerText = item;
            div.onclick = () => sellItem(index);
            container.appendChild(div);
        });
    }

    function sellItem(index) {
        let item = gameData.inventory[index];
        let price = 5; // Base sell price
        if (item.includes('–±–∏–ª–µ—Ç')) price = 15;
        if (item.includes('–ú–æ–Ω–µ—Ç–∞')) price = 2;
        
        gameData.balance += price;
        gameData.inventory.splice(index, 1);
        showToast(`–ü—Ä–æ–¥–∞–Ω–æ: ${item} –∑–∞ ${price} PLN`, "success");
        updateUI();
    }

    function spawnFloatingText(e, text, isCrit) {
        let el = document.createElement('div');
        el.className = 'level-up-anim';
        el.innerText = text;
        if (isCrit) {
            el.style.color = '#f1c40f';
            el.style.fontSize = '2rem';
        }
        
        let x = e.clientX + (Math.random() * 40 - 20);
        let y = e.clientY - 20;
        
        el.style.left = x + 'px';
        el.style.top = y + 'px';
        document.body.appendChild(el);
        setTimeout(() => el.remove(), 1000);
    }

    function switchSection(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById('section-' + id).classList.add('active');
        
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        event.currentTarget.classList.add('active');
    }

    function closeModal(id) {
        document.getElementById(id).style.display = 'none';
    }

    function showToast(msg, type) {
        const container = document.getElementById('toast-container');
        const toast = document.createElement('div');
        toast.className = 'toast';
        toast.style.borderLeftColor = type === 'success' ? '#27ae60' : '#c0392b';
        toast.innerText = msg;
        container.appendChild(toast);
        setTimeout(() => toast.remove(), 3000);
    }

    // --- SAVE/LOAD SYSTEM ---
    function saveGame() {
        gameData.lastSaveTime = Date.now();
        const json = JSON.stringify(gameData);
        const encoded = btoa(json);
        localStorage.setItem(SAVE_KEY, encoded);
        document.getElementById('save-code-area').value = encoded;
        showToast("–ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!", "success");
    }

    function loadGameLocal() {
        const saved = localStorage.getItem(SAVE_KEY);
        if (saved) {
            try {
                const json = atob(saved);
                const data = JSON.parse(json);
                gameData = { ...gameData, ...data };
                // Restore button states
                if (gameData.upgrades.bike) {
                    document.getElementById('btn-buy-bike').disabled = true;
                    document.getElementById('btn-buy-bike').innerText = "–ö—É–ø–ª–µ–Ω–æ";
                }
                if (gameData.upgrades.scooter) {
                    document.getElementById('btn-buy-scooter').disabled = true;
                    document.getElementById('btn-buy-scooter').innerText = "–ö—É–ø–ª–µ–Ω–æ";
                }
                if (gameData.courierActive) {
                    document.getElementById('courier-toggle-btn').innerText = "–ó–∞–∫–æ–Ω—á–∏—Ç—å —Å–º–µ–Ω—É";
                    document.getElementById('courier-toggle-btn').style.background = "#c0392b";
                    document.getElementById('courier-status').innerText = "–°—Ç–∞—Ç—É—Å: –†–ê–ë–û–¢–ê–ï–¢";
                    document.getElementById('courier-status').style.color = "#27ae60";
                }
                showToast("–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ", "success");
            } catch (e) {
                console.error("Save error", e);
            }
        }
    }

    function loadGame() {
        const code = document.getElementById('save-code-area').value;
        if (!code) return;
        try {
            const json = atob(code);
            gameData = { ...gameData, ...JSON.parse(json) };
            saveGame(); // Save to local immediately
            location.reload();
        } catch (e) {
            showToast("–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥!", "danger");
        }
    }

    function resetGame() {
        if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω.")) {
            localStorage.removeItem(SAVE_KEY);
            location.reload();
        }
    }

</script>
</body>
</html>
