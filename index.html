<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Warszawa Courier Simulator</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css?v=5.1">
    
    <style>
        #admin-panel-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 9999;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            color: white;
        }
        
        #admin-panel-overlay.active { display: block; }

        .admin-header {
            display: flex; align-items: center; gap: 10px; margin-bottom: 20px;
            border-bottom: 1px solid #333; padding-bottom: 15px;
        }

        .input-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px;
        }

        .input-group label {
            display: block; font-size: 11px; color: #888; margin-bottom: 5px;
        }

        .input-dark {
            width: 100%; background: #222; border: 1px solid #333; padding: 12px;
            border-radius: 8px; color: white; font-size: 16px; box-sizing: border-box;
        }

        .section-header-adm {
            color: #3b82f6; font-weight: bold; font-size: 16px;
            margin-top: 20px; margin-bottom: 15px;
        }

        /* –ü–ª–∞–≤–∞—é—â–∏–µ –∫–Ω–æ–ø–∫–∏ –∞–¥–º–∏–Ω–∫–∏ */
        .admin-footer-btns {
            position: fixed; bottom: 0; left: 0; width: 100%;
            padding: 15px; background: #000; border-top: 1px solid #333;
            display: flex; flex-direction: column; gap: 10px;
            z-index: 10000;
        }

        .btn-adm-save {
            width: 100%; background: #22c55e; color: black; font-weight: 900;
            padding: 15px; border: none; border-radius: 12px; font-size: 16px;
            text-transform: uppercase;
        }
        
        .btn-adm-close {
            width: 100%; background: #333; color: white; font-weight: 600;
            padding: 12px; border: none; border-radius: 12px; font-size: 14px;
        }
    </style>
</head>
<body>

<div id="bonus-overlay">
    <button id="bonus-btn" onclick="claimBonus()">üéÅ +50 PLN</button>
</div>

<div id="starter-modal" class="modal-overlay">
    <div class="modal-card">
        <div style="font-size: 40px; margin-bottom: 10px;">üëã</div>
        <h3 style="margin-top:0; color:white;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h3>
        <p style="color:var(--text-secondary); font-size:12px; margin-bottom:20px;">
            –í–∞—Ä—à–∞–≤–∞ –Ω–µ –ø—Ä–æ—â–∞–µ—Ç –æ—à–∏–±–æ–∫. –ù–æ –º—ã —Å–≤–æ–∏—Ö –Ω–µ –±—Ä–æ—Å–∞–µ–º.<br>
            –î–µ—Ä–∂–∏ <b>"–ù–∞–±–æ—Ä –í—ã–∂–∏–≤–∞–ª—å—â–∏–∫–∞"</b> –æ—Ç –ø—Ä–æ—Ñ—Å–æ—é–∑–∞:
        </p>
        <button class="btn-action" style="background:var(--success)" onclick="claimStarterPack()">–ó–ê–ë–†–ê–¢–¨ –ò –ù–ê–ß–ê–¢–¨</button>
    </div>
</div>

<div id="route-modal" class="modal-overlay">
    <div class="modal-card">
        <h3 style="margin-top:0; color:white; margin-bottom: 5px;">üìç –í—ã–±–æ—Ä –º–∞—Ä—à—Ä—É—Ç–∞</h3>
        <div class="route-option" onclick="chooseRoute('safe')">
            <div class="route-icon">üê¢</div>
            <div><b>–°–ø–æ–∫–æ–π–Ω—ã–π –ø—É—Ç—å</b><br><small style="color:var(--success)">100% –æ–ø–ª–∞—Ç–∞</small></div>
        </div>
        <div class="route-option" onclick="chooseRoute('risky')">
            <div class="route-icon">üòà</div>
            <div><b>–°—Ä–µ–∑–∞—Ç—å (-50% –≤—Ä–µ–º–µ–Ω–∏)</b><br><small style="color:var(--danger)">–†–∏—Å–∫ –∞–≤–∞—Ä–∏–∏</small></div>
        </div>
        <div class="route-option" style="border-color:var(--accent-gold); background:rgba(245, 158, 11, 0.1);" id="btn-auto-route" onclick="activateAutopilotDynamic()">
            <div class="route-icon">ü§ñ</div>
            <div id="lbl-auto-container">
                <div id="lbl-auto-route"><b>–ê–≤—Ç–æ–ø–∏–ª–æ—Ç</b> <span id="price-auto"></span></div>
                <div><small style="color:var(--accent-gold)">–†–æ–±–æ—Ç —Å–¥–µ–ª–∞–µ—Ç –≤—Å—ë —Å–∞–º</small></div>
            </div>
        </div>
        <button class="btn-action btn-secondary" style="padding:8px;" onclick="closeRouteModal()">–û–¢–ú–ï–ù–ê</button>
    </div>
</div>

<div id="pro-shop-modal" class="modal-overlay" style="z-index: 3500;">
    <div class="modal-card" style="width: 90%; max-width: 360px;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
            <h3 style="margin:0; color:white;">‚öôÔ∏è –ü—Ä–æ—Ñ. –≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞</h3>
            <button onclick="closeProShop()" style="background:transparent; border:none; color:#aaa; font-size:20px;">‚úï</button>
        </div>
        <div id="shop-upgrades-list"></div>
        <button class="btn-action btn-secondary" style="margin-top:20px;" onclick="closeProShop()">–ó–ê–ö–†–´–¢–¨</button>
    </div>
</div>

<div id="quest-bar">
    <div style="display:flex; justify-content:space-between; align-items:flex-start;">
        <div>
            <b id="quest-title" style="color:var(--accent-blue); font-size: 13px;">üì¶ –ù–û–í–´–ô –ó–ê–ö–ê–ó</b><br>
            <small style="color:var(--text-secondary)">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:</small> <b style="color:var(--success);" id="quest-pay">0.00</b> PLN
        </div>
        <div id="quest-timer-ui" style="color:var(--danger); font-weight:bold; font-size: 18px;">0:15</div>
    </div>
    <div id="quest-actions-choice" style="margin-top:10px;">
        <button class="btn-action" style="background:var(--accent-blue);" onclick="openRouteModal()">üó∫Ô∏è –í–´–ë–†–ê–¢–¨ –ú–ê–†–®–†–£–¢</button>
    </div>
    <div id="quest-active-ui" style="display:none; margin-top:10px;">
        <div id="order-status-text" style="font-size: 11px; margin-bottom: 5px; color: var(--accent-blue);">–î–æ—Å—Ç–∞–≤–∫–∞...</div>
        <div class="energy-track" style="height:6px; background:rgba(0,0,0,0.2);"><div id="quest-progress-bar" style="height:100%; width:0%; background:var(--success);"></div></div>
    </div>
</div>

<div class="header-container">
    <div class="top-nav">
        <div>
            <small style="color:var(--text-secondary); font-size:10px;">–ë–∞–ª–∞–Ω—Å</small><br>
            <b id="money-val" class="money-display">0.00 PLN</b>
            <div id="shoes-status-ui">üëü <span id="shoe-name">...</span></div>
        </div>
        <div class="right-panel">
            <b id="lvl-val" class="lvl-display">LVL 1.0</b>
            <div style="display:flex; gap:3px;">
                <div id="bike-status-ui" class="status-badge">üö≤ 00:00</div>
                <div id="auto-status-ui" class="status-badge">ü§ñ 00:00</div>
                <div id="buff-status-ui" class="status-badge">‚ö° 00:00</div>
            </div>
        </div>
    </div>
    <div class="info-row" style="margin-top:5px;">
        <span style="display:flex; align-items:center; gap:4px;"><span style="color:var(--accent-gold)">‚ö°</span> <b id="en-text">0/2000</b></span>
        <span style="display:flex; align-items:center; gap:4px;"><span style="color:var(--accent-blue)">üíß</span> <b id="water-val">0</b> –º–ª</span>
    </div>
    <div class="energy-track" style="margin-top:5px;"><div id="en-fill" class="energy-fill"></div></div>
</div>

<div class="content">
    <div id="view-main" class="view active">
        <div style="text-align: center; margin-top: 5px;">
            <span style="background:rgba(255,255,255,0.05); padding: 4px 12px; border-radius: 15px; font-size: 11px; color: var(--text-secondary);" id="district-ui">üìç ...</span>
        </div>
        <div class="sphere-container">
            <div id="work-sphere">
                <b id="sphere-text">–†–ê–ë–û–¢–ê–¢–¨</b>
                <div id="click-rate-ui" style="font-size: 11px; opacity: 0.9; margin-top: 4px;">0.10 PLN</div>
            </div>
            <div id="repair-express-btn" style="display:none; text-align:center; margin-top:10px;">
                <button class="btn-action" style="background:var(--accent-gold); color:black;" onclick="repairBikeInstantDynamic()">üîß –≠–ö–°–ü–†–ï–°–° –†–ï–ú–û–ù–¢</button>
            </div>
        </div>
        <div class="bottom-controls">
            <button class="btn-action btn-secondary" onclick="collectBottles()" id="btn-bottles-action">‚ôªÔ∏è –°–ë–û–† –ë–£–¢–´–õ–û–ö (+0.05)</button>
            <button class="btn-action" onclick="switchTab('districts', this)">üó∫Ô∏è –ö–ê–†–¢–ê –ì–û–†–û–î–ê</button>
        </div>
    </div>

    <div id="view-districts" class="view">
        <h3 style="margin:0;">üó∫Ô∏è –†–∞–π–æ–Ω—ã</h3>
        <div id="districts-list-container"></div>
    </div>

    <div id="view-quests" class="view">
        <h4 style="margin:15px 0 5px 0;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h4>
        <div class="card">
            <div class="stat-row"><span>üì¶ –í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤</span> <b id="stat-orders">0</b></div>
            <div class="stat-row"><span>üíµ –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –≤—Å–µ–≥–æ</span> <b id="stat-earned" style="color:var(--success)">0.00 PLN</b></div>
        </div>
        <h4 style="margin:15px 0 5px 0;">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h4>
        <div id="milestones-list"></div>
    </div>

    <div id="view-shop" class="view">
        <h3 style="margin:0; margin-bottom: 15px;">üè™ –ú–∞—Ä–∫–µ—Ç</h3>
        
        <div class="section-title">üõµ –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</div>
        <div class="shop-grid">
            <div class="shop-item" style="grid-column: span 2; border-top: 2px solid var(--accent-blue);">
                <div style="display:flex; align-items:center; width:100%; gap:15px;">
                    <div class="shop-icon">‚ö°</div>
                    <div style="text-align:left; flex:1;">
                        <div class="shop-title">E-Bike –ü—Ä–µ–º–∏—É–º</div>
                        <div class="shop-desc" style="color:#fff;">–°–∫–æ—Ä–æ—Å—Ç—å x2.</div>
                    </div>
                    <button id="buy-bike-rent" class="btn-price" style="width:auto; padding: 8px 20px;" onclick="rentBikeDynamic()">–ê–†–ï–ù–î–û–í–ê–¢–¨</button>
                </div>
            </div>
        </div>

        <div class="tech-banner" onclick="openProShop()" style="margin-top: 20px;">
            <div style="z-index: 1;">
                <div style="font-size: 10px; color: var(--accent-blue); font-weight: 800;">GEAR STORE</div>
                <h2 style="margin: 5px 0;">–≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞</h2>
                <button class="btn-action" style="width: auto; padding: 6px 15px; font-size: 11px;">–ö–ê–¢–ê–õ–û–ì</button>
            </div>
            <div style="font-size: 50px;">üéí</div>
        </div>

        <div class="section-title">‚ö° –≠–Ω–µ—Ä–≥–∏—è</div>
        <div class="shop-grid">
            <div class="shop-item item-food">
                <div class="shop-icon">üíß</div>
                <div class="shop-title">–í–æ–¥–∞ (1.5–ª)</div>
                <div class="shop-desc">+1500 –º–ª</div>
                <button id="btn-buy-water" class="btn-price" onclick="buyWaterDynamic()">1.50 PLN</button>
            </div>
            <div class="shop-item item-food">
                <div class="shop-icon">‚òï</div>
                <div class="shop-title">–≠—Å–ø—Ä–µ—Å—Å–æ</div>
                <div class="shop-desc">+300 Energy</div>
                <button id="btn-buy-coffee" class="btn-price" onclick="buyDrinkDynamic('coffee')">5.00 PLN</button>
            </div>
            <div class="shop-item item-energy" style="grid-column: span 2;">
                <div style="display:flex; align-items:center; width:100%; gap:15px;">
                    <div class="shop-icon">üîã</div>
                    <div style="text-align:left; flex:1;">
                        <div class="shop-title">Red Bull Power</div>
                        <div class="shop-desc" style="color:#fff;">–ü–∞—É–∑–∞ —ç–Ω–µ—Ä–≥–∏–∏ (2 –º–∏–Ω)</div>
                    </div>
                    <button id="btn-buy-energy" class="btn-price" style="width:auto; padding: 8px 20px;" onclick="buyDrinkDynamic('energy')">12.00</button>
                </div>
            </div>
        </div>
        <div style="height: 20px;"></div>
    </div>

    <div id="view-invest" class="view">
        <h3 style="margin:0;">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>
        <div id="my-items-list" class="shop-grid"></div>
    </div>

    <div id="view-bank" class="view">
        <h3 style="margin:0; margin-bottom: 15px;">üè¶ –ë–∞–Ω–∫</h3>
        <div class="card" style="margin-bottom:10px;">
            <h4 style="margin:0 0 5px 0; font-size:12px; color:var(--accent-blue);">üéÅ –°–µ–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥</h4>
            <div style="display:flex; gap:5px;">
                <input type="text" id="promo-input" class="promo-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ..." style="margin:0;">
                <button class="btn-action" style="width:auto;" onclick="checkSecretPromo()">–ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨</button>
            </div>
        </div>
        <div class="sapphire-card">
            <div class="bank-header"><span class="bank-name">Private Vault</span></div>
            <div id="bank-select-ui">
                <input type="number" id="bank-inp" class="promo-input" placeholder="–°—É–º–º–∞..." style="margin:0; text-align:center; font-weight:bold;">
                <button class="btn-action btn-deposit" style="width:100%; margin-top:10px;" onclick="makeDeposit()">–í–õ–û–ñ–ò–¢–¨</button>
            </div>
             <div id="bank-active-ui" style="display:none; text-align:center;">
                <div class="locked-info">–ó–ê–ú–û–†–û–ñ–ï–ù–û</div>
                <div class="locked-amount" id="locked-val">0.00 PLN</div>
                <button class="btn-break" id="btn-bank-break" onclick="breakDeposit()">–†–ê–ó–ë–ò–¢–¨ (-30%)</button>
            </div>
        </div>
    </div>
</div>

<div class="tab-bar">
    <div class="tab-item active" onclick="switchTab('main', this)">–ì–æ—Ä–æ–¥</div>
    <div class="tab-item" onclick="switchTab('quests', this)">–ö–∞—Ä—å–µ—Ä–∞</div>
    <div class="tab-item" onclick="switchTab('shop', this)">–ú–∞–≥–∞–∑–∏–Ω</div>
    <div class="tab-item" onclick="switchTab('invest', this)">–ò–Ω–≤–µ—Å—Ç</div>
    <div class="tab-item" onclick="switchTab('bank', this)">–ë–∞–Ω–∫</div>
</div>

<div id="admin-panel-overlay">
    <div class="admin-header">
        <div style="font-size: 30px;">üéõÔ∏è</div>
        <div style="flex:1;">
            <h2 style="margin:0; font-size:18px; color:white;">–ü—É–ª—å—Ç –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è v8.0</h2>
            <div style="font-size:11px; color:#666;">–ò–∑–º–µ–Ω—è–π —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å –∏–≥—Ä—ã</div>
        </div>
    </div>

    <div class="section-header-adm">üõí –ú–∞–≥–∞–∑–∏–Ω –∏ –£—Å–ª—É–≥–∏ (PLN)</div>
    <div class="input-grid">
        <div class="input-group"><label>–í–æ–¥–∞ (1.5–ª)</label><input type="number" id="adm-water" class="input-dark" value="2.19"></div>
        <div class="input-group"><label>–ö–æ—Ñ–µ (Energy)</label><input type="number" id="adm-coffee" class="input-dark" value="12"></div>
        <div class="input-group"><label>–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫ (Buff)</label><input type="number" id="adm-energy" class="input-dark" value="22"></div>
        <div class="input-group"><label>–≠–∫—Å–ø—Ä–µ—Å—Å –†–µ–º–æ–Ω—Ç</label><input type="number" id="adm-repair" class="input-dark" value="47"></div>
        <div class="input-group"><label>–ê–≤—Ç–æ–ø–∏–ª–æ—Ç</label><input type="number" id="adm-auto" class="input-dark" value="55"></div>
        <div class="input-group"><label>–ê—Ä–µ–Ω–¥–∞ Bike</label><input type="number" id="adm-bike" class="input-dark" value="78"></div>
    </div>

    <div class="section-header-adm">üè¶ –≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏ –ù–∞–ª–æ–≥–∏</div>
    <div class="input-grid">
        <div class="input-group"><label>–ù–∞–ª–æ–≥ (%)</label><input type="number" id="adm-tax" class="input-dark" value="29"></div>
        <div class="input-group"><label>–ü–æ—Ä–æ–≥ –Ω–∞–ª–æ–≥–∞</label><input type="number" id="adm-tax-lim" class="input-dark" value="200"></div>
        <div class="input-group"><label>–ò–Ω—Ñ–ª—è—Ü–∏—è (%)</label><input type="number" id="adm-inf" class="input-dark" value="178"></div>
        <div class="input-group"><label>–ü–æ—Å–æ–±–∏–µ</label><input type="number" id="adm-pens" class="input-dark" value="50"></div>
        <div class="input-group"><label>–ü—Ä–æ—Ü–µ–Ω—Ç –ë–∞–Ω–∫–∞</label><input type="number" id="adm-bank" class="input-dark" value="5"></div>
        <div class="input-group"><label>–¶–µ–Ω–∞ –±—É—Ç—ã–ª–∫–∏</label><input type="number" id="adm-bottle" class="input-dark" value="0.6"></div>
    </div>
    
    <div style="height: 150px;"></div>
    
    <div class="admin-footer-btns">
        <button class="btn-adm-save" onclick="applyAdminSettings()">‚úÖ –ü–†–ò–ú–ï–ù–ò–¢–¨ –ò–ó–ú–ï–ù–ï–ù–ò–Ø</button>
        <button class="btn-adm-close" onclick="toggleAdmin()">‚ùå –ó–ê–ö–†–´–¢–¨ –ò –í–ï–†–ù–£–¢–¨–°–Ø</button>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="database.js?v=4.0"></script>
<script src="logic.js?v=8.0" defer></script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        loadAdminSettings();
    });

    // –°–µ–∫—Ä–µ—Ç–Ω—ã–π –≤—Ö–æ–¥: ADMIN9422S
    function checkSecretPromo() {
        const inp = document.getElementById('promo-input');
        const val = inp.value.trim().toUpperCase();
        
        if(val === 'ADMIN9422S') {
            toggleAdmin(); 
            inp.value = '';
        } else {
            // –ï—Å–ª–∏ –µ—Å—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ - –≤—ã–∑—ã–≤–∞–µ–º
            if(window.usePromo) window.usePromo();
            else alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥');
        }
    }

    function toggleAdmin() {
        document.getElementById('admin-panel-overlay').classList.toggle('active');
    }

    function applyAdminSettings() {
        // 1. –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
        const settings = {
            water: document.getElementById('adm-water').value,
            coffee: document.getElementById('adm-coffee').value,
            energy: document.getElementById('adm-energy').value,
            repair: document.getElementById('adm-repair').value,
            auto: document.getElementById('adm-auto').value,
            bike: document.getElementById('adm-bike').value,
            
            tax: document.getElementById('adm-tax').value,
            taxLimit: document.getElementById('adm-tax-lim').value,
            inflation: document.getElementById('adm-inf').value,
            pension: document.getElementById('adm-pens').value,
            bank: document.getElementById('adm-bank').value,
            bottle: document.getElementById('adm-bottle').value
        };
        localStorage.setItem('WARSZAWA_ADMIN_SETTINGS', JSON.stringify(settings));

        // 2. –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ –∫–Ω–æ–ø–∫–∏
        updateGameInterface(settings);

        // 3. –ù–ï –ó–ê–ö–†–´–í–ê–ï–ú –û–ö–ù–û, –ø—Ä–æ—Å—Ç–æ —É–≤–µ–¥–æ–º–ª—è–µ–º
        const saveBtn = document.querySelector('.btn-adm-save');
        const oldText = saveBtn.innerText;
        saveBtn.innerText = "–°–û–•–†–ê–ù–ï–ù–û!";
        saveBtn.style.background = "white";
        setTimeout(() => {
            saveBtn.innerText = oldText;
            saveBtn.style.background = "#22c55e";
        }, 1000);
    }

    function loadAdminSettings() {
        const raw = localStorage.getItem('WARSZAWA_ADMIN_SETTINGS');
        if(raw) {
            const s = JSON.parse(raw);
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è
            document.getElementById('adm-water').value = s.water || 2.19;
            document.getElementById('adm-coffee').value = s.coffee || 12;
            document.getElementById('adm-energy').value = s.energy || 22;
            document.getElementById('adm-repair').value = s.repair || 47;
            document.getElementById('adm-auto').value = s.auto || 55;
            document.getElementById('adm-bike').value = s.bike || 78;
            
            document.getElementById('adm-tax').value = s.tax || 29;
            document.getElementById('adm-tax-lim').value = s.taxLimit || 200;
            document.getElementById('adm-inf').value = s.inflation || 178;
            document.getElementById('adm-pens').value = s.pension || 50;
            document.getElementById('adm-bank').value = s.bank || 5;
            document.getElementById('adm-bottle').value = s.bottle || 0.6;
            
            updateGameInterface(s);
        }
    }

    function updateGameInterface(s) {
        if(document.getElementById('btn-buy-water')) 
            document.getElementById('btn-buy-water').innerText = parseFloat(s.water).toFixed(2) + " PLN";
        if(document.getElementById('btn-buy-coffee')) 
            document.getElementById('btn-buy-coffee').innerText = parseFloat(s.coffee).toFixed(2) + " PLN";
        if(document.getElementById('btn-buy-energy')) 
            document.getElementById('btn-buy-energy').innerText = parseFloat(s.energy).toFixed(2) + " PLN";
        if(document.getElementById('btn-bottles-action')) 
            document.getElementById('btn-bottles-action').innerText = `‚ôªÔ∏è –°–ë–û–† –ë–£–¢–´–õ–û–ö (+${parseFloat(s.bottle).toFixed(2)})`;
    }

    // --- –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê –ü–û–ö–£–ü–ö–ò (–ü–ï–†–ï–•–í–ê–¢) ---
    // –≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∏–∑ HTML –∫–Ω–æ–ø–æ–∫ –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ü–µ–Ω—ã –ê–¥–º–∏–Ω–∞

    function buyWaterDynamic() {
        const price = parseFloat(document.getElementById('adm-water').value);
        // –ú—ã –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ money - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏–∑ logic.js
        if(typeof money !== 'undefined') {
            if(money >= price) {
                money -= price;
                if(typeof water !== 'undefined') water += 1500;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI
                if(typeof updateUI === 'function') updateUI();
                else {
                    document.getElementById('money-val').innerText = money.toFixed(2) + " PLN";
                    if(document.getElementById('water-val')) document.getElementById('water-val').innerText = water;
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º, –µ—Å–ª–∏ –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è
                if(typeof saveGame === 'function') saveGame();
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!");
            }
        }
    }

    function buyDrinkDynamic(type) {
        let price = 0;
        if(type === 'coffee') price = parseFloat(document.getElementById('adm-coffee').value);
        if(type === 'energy') price = parseFloat(document.getElementById('adm-energy').value);
        
        // –ü—ã—Ç–∞–µ–º—Å—è –≤—ã–∑–≤–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –Ω–æ —Å –Ω–æ–≤–æ–π —Ü–µ–Ω–æ–π, –µ—Å–ª–∏ –æ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç–æ
        // –ï—Å–ª–∏ logic.js –∂–µ—Å—Ç–∫–æ –ø—Ä–æ–ø–∏—Å–∞–Ω, –º—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É:
        
        if(typeof money !== 'undefined' && money >= price) {
             // –ï—Å–ª–∏ –µ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è buyDrink, –ø—Ä–æ–±—É–µ–º –≤—ã–∑–≤–∞—Ç—å –µ—ë (–Ω–∞–¥–µ—è—Å—å, —á—Ç–æ –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ —Å–ø–∏—à–µ—Ç –¥–µ–Ω—å–≥–∏, –µ—Å–ª–∏ –º—ã –∏—Ö –ø–æ–¥–º–µ–Ω–∏–º, –∏–ª–∏ –ø–µ—Ä–µ–¥–∞–¥–∏–º 0)
             // –ù–æ –ª—É—á—à–µ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ—é –ª–æ–≥–∏–∫—É —Å–ø–∏—Å–∞–Ω–∏—è:
             money -= price;
             
             // –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç
             if(type === 'coffee') {
                 if(typeof energy !== 'undefined') energy += 300;
             }
             if(type === 'energy') {
                 // –¢—É—Ç —Å–ª–æ–∂–Ω–µ–µ, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ —Å—Ç–∞—Ç—É—Å. –ü–æ–ø—Ä–æ–±—É–µ–º –≤—ã–∑–≤–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª —Å —Ü–µ–Ω–æ–π 0, —Ç–∞–∫ –∫–∞–∫ –º—ã —É–∂–µ —Å–ø–∏—Å–∞–ª–∏ –¥–µ–Ω—å–≥–∏?
                 // –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –≤–∫–ª—é—á–∏–º —Ñ–ª–∞–≥, –µ—Å–ª–∏ –∑–Ω–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é.
                 // –õ—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º logic.js:
                 // –í—ã–∑–≤–∞—Ç—å buyDrink('energy', 0) –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ü–µ–Ω—É.
                 if(typeof buyDrink === 'function') {
                     // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–µ–Ω—å–≥–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ, —á—Ç–æ–±—ã buyDrink —Å—Ä–∞–±–æ—Ç–∞–ª? –ù–µ—Ç.
                     // –ü—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ–º buyDrink —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –Ω–æ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º —Å–ø–∏—Å–∞–Ω–∏–µ? –°–ª–æ–∂–Ω–æ.
                     // –ü–†–û–°–¢–û–ô –í–ê–†–ò–ê–ù–¢:
                     if(typeof activateBuff === 'function') activateBuff(); // –ï—Å–ª–∏ –µ—Å—Ç—å —Ç–∞–∫–∞—è
                 }
             }

             if(typeof updateUI === 'function') updateUI();
             else document.getElementById('money-val').innerText = money.toFixed(2) + " PLN";
             
             if(typeof saveGame === 'function') saveGame();
        } else {
            alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!");
        }
    }
    
    // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–∏–∫—Å –¥–ª—è Energy/Coffee, —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞,
    // –Ω–æ —Å –Ω–æ–≤–æ–π —Ü–µ–Ω–æ–π. –ú—ã –ø–æ–¥–º–µ–Ω—è–µ–º buyDrink –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º.
    // –≠—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ –≤—Å–µ–≥–æ.
    setTimeout(() => {
        if(typeof window.buyDrink === 'function') {
            const originalBuyDrink = window.buyDrink;
            window.buyDrinkDynamic = function(type) {
                let price = 0;
                if(type === 'coffee') price = parseFloat(document.getElementById('adm-coffee').value);
                if(type === 'energy') price = parseFloat(document.getElementById('adm-energy').value);
                
                // –í—ã–∑—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª, –ø–µ—Ä–µ–¥–∞–≤–∞—è –µ–º—É –ù–ê–®–£ —Ü–µ–Ω—É
                originalBuyDrink(type, price);
            }
        }
        
        // –î–ª—è –≤–æ–¥—ã (–≥–¥–µ —Ü–µ–Ω–∞ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∞—Å—å)
        if(typeof window.buyWater === 'function') {
             window.buyWaterDynamic = function() {
                 let price = parseFloat(document.getElementById('adm-water').value);
                 // –ú—ã –Ω–µ –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞—Ç—å —Ü–µ–Ω—É –≤ buyWater(), —Ç–∞–∫ –∫–∞–∫ —Ç–∞–º –æ–Ω–∞ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è.
                 // –ü—Ä–∏–¥–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é:
                 if(money >= price) {
                     money -= price;
                     water += 1500;
                     if(typeof updateUI === 'function') updateUI();
                     if(typeof saveGame === 'function') saveGame();
                 } else {
                     alert("–ù–µ—Ç –¥–µ–Ω–µ–≥ (–ê–¥–º–∏–Ω —Ü–µ–Ω–∞)");
                 }
             }
        }
    }, 1000); // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ logic.js
</script>

</body>
</html>
